2025-12-02 04:36:16.735 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 04:36:16.806 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 04:36:17.031 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 04:36:17.075 +01:00 [INF] Hosting environment: Development
2025-12-02 04:36:17.095 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 17:38:16.373 +01:00 [INF] Executed DbCommand (366ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [ArpceHomologation_BackOffice];
2025-12-02 17:38:16.507 +01:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ArpceHomologation_BackOffice] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-02 17:38:16.526 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-02 17:38:16.556 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-02 17:38:16.664 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-02 17:38:16.674 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-02 17:38:16.675 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-02 17:38:16.686 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-02 17:38:16.897 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminAccess] (
    [Id] uniqueidentifier NOT NULL,
    [Application] nvarchar(120) NOT NULL,
    [Groupe] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Page] nvarchar(120) NULL,
    [Type] nvarchar(120) NOT NULL,
    [Inactif] tinyint NULL,
    [Ajouter] tinyint NULL,
    [Valider] tinyint NULL,
    [Supprimer] tinyint NULL,
    [Imprimer] tinyint NULL,
    CONSTRAINT [PK_adminAccess] PRIMARY KEY ([Id])
);
2025-12-02 17:38:16.899 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminConnexions] (
    [Id] uniqueidentifier NOT NULL,
    [Utilisateur] nvarchar(60) NOT NULL,
    [DateConnexion] datetime NOT NULL,
    [Ip] nvarchar(60) NULL,
    CONSTRAINT [PK_adminConnexions] PRIMARY KEY ([Id])
);
2025-12-02 17:38:16.901 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminEvenementsTypes] (
    [Id] uniqueidentifier NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    CONSTRAINT [PK_adminEvenementsTypes] PRIMARY KEY ([Id])
);
2025-12-02 17:38:17.290 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdminOptions] (
    [Id] uniqueidentifier NOT NULL,
    [JournalActivation] tinyint NULL,
    [EventConnexion] tinyint NULL,
    [EventOuverturePage] tinyint NULL,
    [EventChangementMotPasse] tinyint NULL,
    [EventModificationDonnees] tinyint NULL,
    [EventSuppressionDonnees] tinyint NULL,
    [EventImpression] tinyint NULL,
    [EventValidation] tinyint NULL,
    [JournalLimitation] tinyint NULL,
    [JournalTypeLimitation] tinyint NULL,
    [JournalDureeLimitation] int NULL,
    [JournalTypeDureeLimitation] tinyint NULL,
    [JournalTailleLimitation] int NULL,
    [LDAPAuthentificationActivation] tinyint NULL,
    [LDAPAuthentificationNomDomaine] nvarchar(60) NULL,
    [LDAPCreationAutoActivation] tinyint NULL,
    [LDAPCreationAutoNomServeur] nvarchar(60) NULL,
    [LDAPCreationAutoCompte] nvarchar(60) NULL,
    [LDAPCreationAutoPassword] nvarchar(60) NULL,
    [ReplicationActivation] tinyint NULL,
    [ReplicationNomServeur] nvarchar(60) NULL,
    [ReplicationCompte] nvarchar(60) NULL,
    [ReplicationPassword] nvarchar(60) NULL,
    CONSTRAINT [PK_AdminOptions] PRIMARY KEY ([Id])
);
2025-12-02 17:38:17.292 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminProfils] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_adminProfils] PRIMARY KEY ([Id])
);
2025-12-02 17:38:17.295 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminReporting] (
    [Id] uniqueidentifier NOT NULL,
    [Application] nvarchar(120) NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Inactif] tinyint NULL,
    CONSTRAINT [PK_adminReporting] PRIMARY KEY ([Id])
);
2025-12-02 17:38:21.132 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminUtilisateurTypes] (
    [Id] uniqueidentifier NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    CONSTRAINT [PK_adminUtilisateurTypes] PRIMARY KEY ([Id])
);
2025-12-02 17:38:21.134 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [categoriesEquipements] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [TypeEquipement] nvarchar(50) NOT NULL,
    [TypeClient] nvarchar(50) NOT NULL,
    [FormuleHomologation] nvarchar(255) NULL,
    [QuantiteReference] int NULL,
    [TarifEtude] money NULL,
    [TarifHomologation] money NULL,
    [TarifHomologationParLot] tinyint NULL,
    [TarifHomologationQuantiteParLot] int NULL,
    [TarifControle] money NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_categoriesEquipements] PRIMARY KEY ([Id])
);
2025-12-02 17:38:21.140 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [clients] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(30) NOT NULL,
    [RaisonSociale] nvarchar(120) NOT NULL,
    [RegistreCommerce] nvarchar(60) NULL,
    [MotPasse] nvarchar(255) NULL,
    [ChangementMotPasse] tinyint NULL,
    [Desactive] tinyint NULL,
    [ContactNom] nvarchar(60) NULL,
    [ContactTelephone] nvarchar(30) NULL,
    [ContactFonction] nvarchar(60) NULL,
    [Email] nvarchar(120) NULL,
    [Adresse] nvarchar(255) NULL,
    [Bp] nvarchar(60) NULL,
    [Ville] nvarchar(100) NULL,
    [Pays] nvarchar(100) NULL,
    [Remarques] nvarchar(512) NULL,
    [TypeClient] nvarchar(20) NOT NULL DEFAULT N'Entreprise',
    [NiveauValidation] int NOT NULL DEFAULT 0,
    [IsVerified] bit NOT NULL DEFAULT CAST(0 AS bit),
    [VerificationCode] nvarchar(6) NULL,
    [VerificationTokenExpiry] datetime2 NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_clients] PRIMARY KEY ([Id])
);
2025-12-02 17:38:26.574 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [modesReglements] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [MobileBanking] tinyint NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_modesReglements] PRIMARY KEY ([Id])
);
2025-12-02 17:38:26.577 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [motifsRejets] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_motifsRejets] PRIMARY KEY ([Id])
);
2025-12-02 17:38:26.581 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [propositions] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_propositions] PRIMARY KEY ([Id])
);
2025-12-02 17:38:31.040 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [statuts] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    CONSTRAINT [PK_statuts] PRIMARY KEY ([Id])
);
2025-12-02 17:38:31.044 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminJournal] (
    [Id] uniqueidentifier NOT NULL,
    [IdEvenementType] uniqueidentifier NOT NULL,
    [Application] nvarchar(120) NOT NULL,
    [AdresseIP] nvarchar(120) NOT NULL,
    [Utilisateur] nvarchar(120) NOT NULL,
    [DateEvenement] datetime NOT NULL,
    [Page] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(255) NULL,
    CONSTRAINT [PK_adminJournal] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_adminJournal_adminEvenementsTypes_IdEvenementType] FOREIGN KEY ([IdEvenementType]) REFERENCES [adminEvenementsTypes] ([Id]) ON DELETE NO ACTION
);
2025-12-02 17:38:31.048 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminProfilsAcces] (
    [IdProfil] uniqueidentifier NOT NULL,
    [IdAccess] uniqueidentifier NOT NULL,
    [Ajouter] tinyint NULL,
    [Valider] tinyint NULL,
    [Supprimer] tinyint NULL,
    [Imprimer] tinyint NULL,
    CONSTRAINT [PK_adminProfilsAcces] PRIMARY KEY ([IdProfil], [IdAccess]),
    CONSTRAINT [FK_adminProfilsAcces_adminAccess_IdAccess] FOREIGN KEY ([IdAccess]) REFERENCES [adminAccess] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_adminProfilsAcces_adminProfils_IdProfil] FOREIGN KEY ([IdProfil]) REFERENCES [adminProfils] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:31.050 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminProfilsUtilisateursLDAP] (
    [Utilisateur] nvarchar(120) NOT NULL,
    [IdProfil] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_adminProfilsUtilisateursLDAP] PRIMARY KEY ([Utilisateur], [IdProfil]),
    CONSTRAINT [FK_adminProfilsUtilisateursLDAP_adminProfils_IdProfil] FOREIGN KEY ([IdProfil]) REFERENCES [adminProfils] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:34.807 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdminUtilisateurs] (
    [Id] uniqueidentifier NOT NULL,
    [IdProfil] uniqueidentifier NULL,
    [IdUtilisateurType] uniqueidentifier NOT NULL,
    [Compte] nvarchar(100) NOT NULL,
    [Nom] nvarchar(100) NOT NULL,
    [Prenoms] nvarchar(150) NULL,
    [MotPasse] nvarchar(255) NULL,
    [ChangementMotPasse] bit NOT NULL,
    [Desactive] bit NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [DerniereConnexion] datetime NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    [AdminProfilsId] uniqueidentifier NULL,
    CONSTRAINT [PK_AdminUtilisateurs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AdminUtilisateurs_adminProfils_AdminProfilsId] FOREIGN KEY ([AdminProfilsId]) REFERENCES [adminProfils] ([Id]),
    CONSTRAINT [FK_AdminUtilisateurs_adminProfils_IdProfil] FOREIGN KEY ([IdProfil]) REFERENCES [adminProfils] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_AdminUtilisateurs_adminUtilisateurTypes_IdUtilisateurType] FOREIGN KEY ([IdUtilisateurType]) REFERENCES [adminUtilisateurTypes] ([Id]) ON DELETE NO ACTION
);
2025-12-02 17:38:34.812 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dossiers] (
    [Id] uniqueidentifier NOT NULL,
    [IdClient] uniqueidentifier NOT NULL,
    [IdStatut] uniqueidentifier NOT NULL,
    [IdModeReglement] uniqueidentifier NULL,
    [DateOuverture] date NOT NULL,
    [Numero] nvarchar(30) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [IdAgentInstructeur] uniqueidentifier NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_dossiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_dossiers_AdminUtilisateurs_IdAgentInstructeur] FOREIGN KEY ([IdAgentInstructeur]) REFERENCES [AdminUtilisateurs] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_dossiers_clients_IdClient] FOREIGN KEY ([IdClient]) REFERENCES [clients] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_dossiers_modesReglements_IdModeReglement] FOREIGN KEY ([IdModeReglement]) REFERENCES [modesReglements] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_dossiers_statuts_IdStatut] FOREIGN KEY ([IdStatut]) REFERENCES [statuts] ([Id]) ON DELETE NO ACTION
);
2025-12-02 17:38:37.434 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [commentaires] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [DateCommentaire] datetime NOT NULL,
    [commentaire] nvarchar(512) NULL,
    [NomInstructeur] nvarchar(60) NULL,
    [Proposition] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_commentaires] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_commentaires_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:37.442 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [demandes] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [IdCategorie] uniqueidentifier NULL,
    [IdMotifRejet] uniqueidentifier NULL,
    [IdProposition] uniqueidentifier NULL,
    [NumeroDemande] nvarchar(12) NULL,
    [Equipement] nvarchar(120) NULL,
    [Modele] nvarchar(120) NULL,
    [Marque] nvarchar(120) NULL,
    [Fabricant] nvarchar(120) NULL,
    [Type] nvarchar(120) NULL,
    [Description] nvarchar(512) NULL,
    [QuantiteEquipements] int NULL,
    [ContactNom] nvarchar(60) NULL,
    [ContactEmail] nvarchar(60) NULL,
    [PrixUnitaire] money NULL,
    [EstHomologable] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Remise] decimal(5,2) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_demandes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_demandes_categoriesEquipements_IdCategorie] FOREIGN KEY ([IdCategorie]) REFERENCES [categoriesEquipements] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_demandes_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_demandes_motifsRejets_IdMotifRejet] FOREIGN KEY ([IdMotifRejet]) REFERENCES [motifsRejets] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_demandes_propositions_IdProposition] FOREIGN KEY ([IdProposition]) REFERENCES [propositions] ([Id]) ON DELETE NO ACTION
);
2025-12-02 17:38:40.545 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [devis] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [Date] date NOT NULL,
    [MontantEtude] money NOT NULL,
    [MontantHomologation] money NULL,
    [MontantControle] money NULL,
    [PaiementOk] tinyint NULL,
    [PaiementMobileId] nvarchar(60) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_devis] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_devis_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:40.550 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [documentsDossiers] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [Nom] nvarchar(120) NULL,
    [Type] tinyint NULL,
    [Donnees] varbinary(max) NULL,
    [Extension] nvarchar(12) NOT NULL,
    [FilePath] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_documentsDossiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_documentsDossiers_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:43.735 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [attestations] (
    [Id] uniqueidentifier NOT NULL,
    [IdDemande] uniqueidentifier NOT NULL,
    [DateDelivrance] date NOT NULL,
    [DateExpiration] date NOT NULL,
    [Donnees] varbinary(max) NULL,
    [Extension] nvarchar(12) NOT NULL,
    CONSTRAINT [PK_attestations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_attestations_demandes_IdDemande] FOREIGN KEY ([IdDemande]) REFERENCES [demandes] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:43.737 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [documentsDemandes] (
    [Id] uniqueidentifier NOT NULL,
    [IdDemande] uniqueidentifier NOT NULL,
    [Nom] nvarchar(120) NULL,
    [Donnees] varbinary(max) NULL,
    [Extension] nvarchar(12) NOT NULL,
    [FilePath] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_documentsDemandes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_documentsDemandes_demandes_IdDemande] FOREIGN KEY ([IdDemande]) REFERENCES [demandes] ([Id]) ON DELETE CASCADE
);
2025-12-02 17:38:43.788 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Libelle') AND [object_id] = OBJECT_ID(N'[adminUtilisateurTypes]'))
    SET IDENTITY_INSERT [adminUtilisateurTypes] ON;
INSERT INTO [adminUtilisateurTypes] ([Id], [Libelle])
VALUES ('654855ca-bdae-4f55-b481-fc3a09bf3f7d', N'Utilisateur Standard'),
('7e5b7d94-4f5d-4eff-9983-c8f846d3cee6', N'Administrateur'),
('b5c3cc10-ff1f-47d0-aa49-4b5fe5a92d39', N'Auditeur');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Libelle') AND [object_id] = OBJECT_ID(N'[adminUtilisateurTypes]'))
    SET IDENTITY_INSERT [adminUtilisateurTypes] OFF;
2025-12-02 17:38:47.266 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'DateCreation', N'DateModification', N'Libelle', N'MobileBanking', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[modesReglements]'))
    SET IDENTITY_INSERT [modesReglements] ON;
INSERT INTO [modesReglements] ([Id], [Code], [DateCreation], [DateModification], [Libelle], [MobileBanking], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES ('729c98b4-5c70-425a-b89f-62fe0a78d261', N'Cheque', NULL, NULL, N'Chèque', CAST(0 AS tinyint), NULL, NULL, NULL),
('d0576258-cecc-42c3-9d6f-5ec183740832', N'Especes', NULL, NULL, N'Espèces', CAST(0 AS tinyint), NULL, NULL, NULL),
('e1db161f-b656-4f62-bead-cc981d0d0052', N'MobileBanking', NULL, NULL, N'Paiement mobile', CAST(1 AS tinyint), NULL, NULL, NULL),
('e99f1daa-749f-4314-bcce-21e5ab3bedf7', N'Virement', NULL, NULL, N'Virement bancaire', CAST(0 AS tinyint), NULL, NULL, NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'DateCreation', N'DateModification', N'Libelle', N'MobileBanking', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[modesReglements]'))
    SET IDENTITY_INSERT [modesReglements] OFF;
2025-12-02 17:38:47.284 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'Libelle') AND [object_id] = OBJECT_ID(N'[statuts]'))
    SET IDENTITY_INSERT [statuts] ON;
INSERT INTO [statuts] ([Id], [Code], [Libelle])
VALUES ('022765d4-8862-4252-a868-7c9514de818f', N'DossierPayer', N'Paiement effectué'),
('036394f6-2dc8-4242-9e01-ea3cf5a64a13', N'PaiementExpirer', N'Paiement expiré'),
('293ddfdf-024d-47d2-8a03-591fc52e540a', N'RefusDossier', N'Refus de la demande'),
('3c9947db-1996-42f1-a266-ec1529af59f0', N'DevisRefuser', N'Devis refusé par client'),
('4095bfe0-a232-46bd-8c37-ab378b1d81cf', N'NouveauDossier', N'Nouvelle demande'),
('598dfd92-00f9-4fa2-837c-1f4de38560a1', N'DevisValide', N'Devis validé par client'),
('5f670bf0-f5e6-46f5-be80-8cee230196f1', N'InstructionApprouve', N'Instruction Approuvée'),
('5fe3e3ba-e24e-48fe-b676-03303e459b0f', N'DevisValideTr', N'Devis validé par Trésorerie'),
('6adaa907-5b85-4372-95e3-91800742532e', N'PaiementRejete', N'Paiement non accepté'),
('712d4229-8bcd-4ef4-b4f5-f9b74ab2ed75', N'DevisCreer', N'Devis créé'),
('9770f151-8dd7-47cf-8ab3-7f38aa809113', N'ApprobationInstruction', N'Envoyé pour approbation'),
('b45a7192-fb24-458a-859d-00fd6f3e6d48', N'DossierSignature', N'Attestation en signature'),
('b4a18c66-0007-48d0-906e-bf4b63aab6cc', N'DossierSigner', N'Attestation signée'),
('bbca9597-475d-4aa6-a62c-fd7af555e4e8', N'DevisValideSC', N'Devis validé par Chef Service'),
('f081973a-5539-48f8-bd3c-906833fb87eb', N'Instruction', N'En cours d''instruction'),
('fdec27a7-6a99-41e3-b5e6-0256445b7e0c', N'DevisEmit', N'Devis émis');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'Libelle') AND [object_id] = OBJECT_ID(N'[statuts]'))
    SET IDENTITY_INSERT [statuts] OFF;
2025-12-02 17:38:50.313 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AdminProfilsId', N'ChangementMotPasse', N'Compte', N'DateCreation', N'DateModification', N'DerniereConnexion', N'Desactive', N'IdProfil', N'IdUtilisateurType', N'MotPasse', N'Nom', N'Prenoms', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[AdminUtilisateurs]'))
    SET IDENTITY_INSERT [AdminUtilisateurs] ON;
INSERT INTO [AdminUtilisateurs] ([Id], [AdminProfilsId], [ChangementMotPasse], [Compte], [DateCreation], [DateModification], [DerniereConnexion], [Desactive], [IdProfil], [IdUtilisateurType], [MotPasse], [Nom], [Prenoms], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES ('0d043795-fda8-413f-ab24-dc3eb1b39a07', NULL, CAST(1 AS bit), N'admin', '2025-01-01T00:00:00.000', NULL, NULL, CAST(0 AS bit), NULL, '7e5b7d94-4f5d-4eff-9983-c8f846d3cee6', N'$2a$11$WsTym4NhNm3jWJERARooBeYR7zGhLs9jx/Bb5Kebk3E/K40HCAq.a', N'Administrateur', N'ARPCE', NULL, N'SYSTEM_SEED', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AdminProfilsId', N'ChangementMotPasse', N'Compte', N'DateCreation', N'DateModification', N'DerniereConnexion', N'Desactive', N'IdProfil', N'IdUtilisateurType', N'MotPasse', N'Nom', N'Prenoms', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[AdminUtilisateurs]'))
    SET IDENTITY_INSERT [AdminUtilisateurs] OFF;
2025-12-02 17:38:51.541 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminJournal_IdEvenementType] ON [adminJournal] ([IdEvenementType]);
2025-12-02 17:38:51.542 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminProfilsAcces_IdAccess] ON [adminProfilsAcces] ([IdAccess]);
2025-12-02 17:38:51.543 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminProfilsUtilisateursLDAP_IdProfil] ON [adminProfilsUtilisateursLDAP] ([IdProfil]);
2025-12-02 17:38:51.566 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AdminUtilisateurs_AdminProfilsId] ON [AdminUtilisateurs] ([AdminProfilsId]);
2025-12-02 17:38:51.569 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AdminUtilisateurs_Compte] ON [AdminUtilisateurs] ([Compte]);
2025-12-02 17:38:51.573 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AdminUtilisateurs_IdProfil] ON [AdminUtilisateurs] ([IdProfil]);
2025-12-02 17:38:53.554 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AdminUtilisateurs_IdUtilisateurType] ON [AdminUtilisateurs] ([IdUtilisateurType]);
2025-12-02 17:38:53.555 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_attestations_IdDemande] ON [attestations] ([IdDemande]);
2025-12-02 17:38:53.556 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_commentaires_IdDossier] ON [commentaires] ([IdDossier]);
2025-12-02 17:38:53.557 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdCategorie] ON [demandes] ([IdCategorie]);
2025-12-02 17:38:53.558 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdDossier] ON [demandes] ([IdDossier]);
2025-12-02 17:38:53.559 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdMotifRejet] ON [demandes] ([IdMotifRejet]);
2025-12-02 17:38:53.560 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdProposition] ON [demandes] ([IdProposition]);
2025-12-02 17:38:53.561 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_devis_IdDossier] ON [devis] ([IdDossier]);
2025-12-02 17:38:53.562 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_documentsDemandes_IdDemande] ON [documentsDemandes] ([IdDemande]);
2025-12-02 17:38:53.564 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_documentsDossiers_IdDossier] ON [documentsDossiers] ([IdDossier]);
2025-12-02 17:38:53.565 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdAgentInstructeur] ON [dossiers] ([IdAgentInstructeur]);
2025-12-02 17:38:54.870 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdClient] ON [dossiers] ([IdClient]);
2025-12-02 17:38:54.871 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdModeReglement] ON [dossiers] ([IdModeReglement]);
2025-12-02 17:38:54.872 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdStatut] ON [dossiers] ([IdStatut]);
2025-12-02 17:38:54.881 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251202163515_Initialisation', N'9.0.11');
2025-12-02 17:38:54.890 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-02 17:48:33.995 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 17:48:34.057 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 17:48:34.208 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 17:48:34.211 +01:00 [INF] Hosting environment: Development
2025-12-02 17:48:34.216 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 17:50:52.767 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-02 17:50:56.388 +01:00 [INF] Executed DbCommand (195ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 17:50:57.240 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 17:52:06.875 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agentId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
WHERE [d].[IdAgentInstructeur] = @__agentId_Value_0
2025-12-02 17:52:54.631 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
2025-12-02 22:33:26.800 +01:00 [INF] Executed DbCommand (523ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [ArpceHomologation_BackOffice];
2025-12-02 22:33:27.215 +01:00 [INF] Executed DbCommand (347ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ArpceHomologation_BackOffice] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-02 22:33:27.264 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-02 22:33:27.351 +01:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-02 22:33:27.514 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-02 22:33:27.538 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-02 22:33:27.540 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-02 22:33:27.554 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-02 22:33:27.808 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminAccess] (
    [Id] uniqueidentifier NOT NULL,
    [Application] nvarchar(120) NOT NULL,
    [Groupe] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Page] nvarchar(120) NULL,
    [Type] nvarchar(120) NOT NULL,
    [Inactif] tinyint NULL,
    [Ajouter] tinyint NULL,
    [Valider] tinyint NULL,
    [Supprimer] tinyint NULL,
    [Imprimer] tinyint NULL,
    [Code] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_adminAccess] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.810 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminConnexions] (
    [Id] uniqueidentifier NOT NULL,
    [Utilisateur] nvarchar(60) NOT NULL,
    [DateConnexion] datetime NOT NULL,
    [Ip] nvarchar(60) NULL,
    CONSTRAINT [PK_adminConnexions] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.812 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminEvenementsTypes] (
    [Id] uniqueidentifier NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_adminEvenementsTypes] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.814 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdminOptions] (
    [Id] uniqueidentifier NOT NULL,
    [JournalActivation] tinyint NULL,
    [EventConnexion] tinyint NULL,
    [EventOuverturePage] tinyint NULL,
    [EventChangementMotPasse] tinyint NULL,
    [EventModificationDonnees] tinyint NULL,
    [EventSuppressionDonnees] tinyint NULL,
    [EventImpression] tinyint NULL,
    [EventValidation] tinyint NULL,
    [JournalLimitation] tinyint NULL,
    [JournalTypeLimitation] tinyint NULL,
    [JournalDureeLimitation] int NULL,
    [JournalTypeDureeLimitation] tinyint NULL,
    [JournalTailleLimitation] int NULL,
    [LDAPAuthentificationActivation] tinyint NULL,
    [LDAPAuthentificationNomDomaine] nvarchar(60) NULL,
    [LDAPCreationAutoActivation] tinyint NULL,
    [LDAPCreationAutoNomServeur] nvarchar(60) NULL,
    [LDAPCreationAutoCompte] nvarchar(60) NULL,
    [LDAPCreationAutoPassword] nvarchar(60) NULL,
    [ReplicationActivation] tinyint NULL,
    [ReplicationNomServeur] nvarchar(60) NULL,
    [ReplicationCompte] nvarchar(60) NULL,
    [ReplicationPassword] nvarchar(60) NULL,
    CONSTRAINT [PK_AdminOptions] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.856 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminProfils] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_adminProfils] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.859 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminReporting] (
    [Id] uniqueidentifier NOT NULL,
    [Application] nvarchar(120) NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Inactif] tinyint NULL,
    CONSTRAINT [PK_adminReporting] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.861 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminUtilisateurTypes] (
    [Id] uniqueidentifier NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    CONSTRAINT [PK_adminUtilisateurTypes] PRIMARY KEY ([Id])
);
2025-12-02 22:33:27.863 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [categoriesEquipements] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [TypeEquipement] nvarchar(50) NOT NULL,
    [TypeClient] nvarchar(50) NOT NULL,
    [FormuleHomologation] nvarchar(255) NULL,
    [QuantiteReference] int NULL,
    [TarifEtude] money NULL,
    [TarifHomologation] money NULL,
    [TarifHomologationParLot] tinyint NULL,
    [TarifHomologationQuantiteParLot] int NULL,
    [TarifControle] money NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_categoriesEquipements] PRIMARY KEY ([Id])
);
2025-12-02 22:33:28.576 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [clients] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(30) NOT NULL,
    [RaisonSociale] nvarchar(120) NOT NULL,
    [RegistreCommerce] nvarchar(60) NULL,
    [MotPasse] nvarchar(255) NULL,
    [ChangementMotPasse] tinyint NULL,
    [Desactive] tinyint NULL,
    [ContactNom] nvarchar(60) NULL,
    [ContactTelephone] nvarchar(30) NULL,
    [ContactFonction] nvarchar(60) NULL,
    [Email] nvarchar(120) NULL,
    [Adresse] nvarchar(255) NULL,
    [Bp] nvarchar(60) NULL,
    [Ville] nvarchar(100) NULL,
    [Pays] nvarchar(100) NULL,
    [Remarques] nvarchar(512) NULL,
    [TypeClient] nvarchar(20) NOT NULL DEFAULT N'Entreprise',
    [NiveauValidation] int NOT NULL DEFAULT 0,
    [IsVerified] bit NOT NULL DEFAULT CAST(0 AS bit),
    [VerificationCode] nvarchar(6) NULL,
    [VerificationTokenExpiry] datetime2 NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_clients] PRIMARY KEY ([Id])
);
2025-12-02 22:33:28.579 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [modesReglements] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [MobileBanking] tinyint NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_modesReglements] PRIMARY KEY ([Id])
);
2025-12-02 22:33:29.298 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [motifsRejets] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_motifsRejets] PRIMARY KEY ([Id])
);
2025-12-02 22:33:29.302 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [propositions] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(12) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_propositions] PRIMARY KEY ([Id])
);
2025-12-02 22:33:29.305 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [statuts] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    CONSTRAINT [PK_statuts] PRIMARY KEY ([Id])
);
2025-12-02 22:33:29.310 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminProfilsAcces] (
    [IdProfil] uniqueidentifier NOT NULL,
    [IdAccess] uniqueidentifier NOT NULL,
    [Ajouter] tinyint NULL,
    [Valider] tinyint NULL,
    [Supprimer] tinyint NULL,
    [Imprimer] tinyint NULL,
    CONSTRAINT [PK_adminProfilsAcces] PRIMARY KEY ([IdProfil], [IdAccess]),
    CONSTRAINT [FK_adminProfilsAcces_adminAccess_IdAccess] FOREIGN KEY ([IdAccess]) REFERENCES [adminAccess] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_adminProfilsAcces_adminProfils_IdProfil] FOREIGN KEY ([IdProfil]) REFERENCES [adminProfils] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:29.989 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminProfilsUtilisateursLDAP] (
    [Utilisateur] nvarchar(120) NOT NULL,
    [IdProfil] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_adminProfilsUtilisateursLDAP] PRIMARY KEY ([Utilisateur], [IdProfil]),
    CONSTRAINT [FK_adminProfilsUtilisateursLDAP_adminProfils_IdProfil] FOREIGN KEY ([IdProfil]) REFERENCES [adminProfils] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:29.999 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdminUtilisateurs] (
    [Id] uniqueidentifier NOT NULL,
    [IdProfil] uniqueidentifier NULL,
    [IdUtilisateurType] uniqueidentifier NOT NULL,
    [Compte] nvarchar(100) NOT NULL,
    [Nom] nvarchar(100) NOT NULL,
    [Prenoms] nvarchar(150) NULL,
    [MotPasse] nvarchar(255) NULL,
    [ChangementMotPasse] bit NOT NULL,
    [Desactive] bit NOT NULL,
    [Remarques] nvarchar(512) NULL,
    [DerniereConnexion] datetime NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    [AdminProfilsId] uniqueidentifier NULL,
    CONSTRAINT [PK_AdminUtilisateurs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AdminUtilisateurs_adminProfils_AdminProfilsId] FOREIGN KEY ([AdminProfilsId]) REFERENCES [adminProfils] ([Id]),
    CONSTRAINT [FK_AdminUtilisateurs_adminProfils_IdProfil] FOREIGN KEY ([IdProfil]) REFERENCES [adminProfils] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_AdminUtilisateurs_adminUtilisateurTypes_IdUtilisateurType] FOREIGN KEY ([IdUtilisateurType]) REFERENCES [adminUtilisateurTypes] ([Id]) ON DELETE NO ACTION
);
2025-12-02 22:33:30.003 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dossiers] (
    [Id] uniqueidentifier NOT NULL,
    [IdClient] uniqueidentifier NOT NULL,
    [IdStatut] uniqueidentifier NOT NULL,
    [IdModeReglement] uniqueidentifier NULL,
    [DateOuverture] date NOT NULL,
    [Numero] nvarchar(30) NOT NULL,
    [Libelle] nvarchar(120) NOT NULL,
    [IdAgentInstructeur] uniqueidentifier NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_dossiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_dossiers_AdminUtilisateurs_IdAgentInstructeur] FOREIGN KEY ([IdAgentInstructeur]) REFERENCES [AdminUtilisateurs] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_dossiers_clients_IdClient] FOREIGN KEY ([IdClient]) REFERENCES [clients] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_dossiers_modesReglements_IdModeReglement] FOREIGN KEY ([IdModeReglement]) REFERENCES [modesReglements] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_dossiers_statuts_IdStatut] FOREIGN KEY ([IdStatut]) REFERENCES [statuts] ([Id]) ON DELETE NO ACTION
);
2025-12-02 22:33:30.660 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [adminJournal] (
    [Id] uniqueidentifier NOT NULL,
    [IdEvenementType] uniqueidentifier NOT NULL,
    [Application] nvarchar(120) NOT NULL,
    [AdresseIP] nvarchar(120) NOT NULL,
    [Utilisateur] nvarchar(120) NOT NULL,
    [DateEvenement] datetime NOT NULL,
    [Page] nvarchar(120) NOT NULL,
    [Libelle] nvarchar(255) NULL,
    [IdDossier] uniqueidentifier NULL,
    [DossierId] uniqueidentifier NULL,
    CONSTRAINT [PK_adminJournal] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_adminJournal_adminEvenementsTypes_IdEvenementType] FOREIGN KEY ([IdEvenementType]) REFERENCES [adminEvenementsTypes] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_adminJournal_dossiers_DossierId] FOREIGN KEY ([DossierId]) REFERENCES [dossiers] ([Id])
);
2025-12-02 22:33:30.664 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [commentaires] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [DateCommentaire] datetime NOT NULL,
    [commentaire] nvarchar(512) NULL,
    [NomInstructeur] nvarchar(60) NULL,
    [Proposition] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_commentaires] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_commentaires_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:31.193 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [demandes] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [IdCategorie] uniqueidentifier NULL,
    [IdMotifRejet] uniqueidentifier NULL,
    [IdProposition] uniqueidentifier NULL,
    [NumeroDemande] nvarchar(12) NULL,
    [Equipement] nvarchar(120) NULL,
    [Modele] nvarchar(120) NULL,
    [Marque] nvarchar(120) NULL,
    [Fabricant] nvarchar(120) NULL,
    [Type] nvarchar(120) NULL,
    [Description] nvarchar(512) NULL,
    [QuantiteEquipements] int NULL,
    [ContactNom] nvarchar(60) NULL,
    [ContactEmail] nvarchar(60) NULL,
    [PrixUnitaire] money NULL,
    [EstHomologable] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Remise] decimal(5,2) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_demandes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_demandes_categoriesEquipements_IdCategorie] FOREIGN KEY ([IdCategorie]) REFERENCES [categoriesEquipements] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_demandes_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_demandes_motifsRejets_IdMotifRejet] FOREIGN KEY ([IdMotifRejet]) REFERENCES [motifsRejets] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_demandes_propositions_IdProposition] FOREIGN KEY ([IdProposition]) REFERENCES [propositions] ([Id]) ON DELETE NO ACTION
);
2025-12-02 22:33:31.699 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [devis] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [Date] date NOT NULL,
    [MontantEtude] money NOT NULL,
    [MontantHomologation] money NULL,
    [MontantControle] money NULL,
    [PaiementOk] tinyint NULL,
    [PaiementMobileId] nvarchar(60) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_devis] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_devis_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:31.701 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [documentsDossiers] (
    [Id] uniqueidentifier NOT NULL,
    [IdDossier] uniqueidentifier NOT NULL,
    [Nom] nvarchar(120) NULL,
    [Type] tinyint NULL,
    [Donnees] varbinary(max) NULL,
    [Extension] nvarchar(12) NOT NULL,
    [FilePath] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_documentsDossiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_documentsDossiers_dossiers_IdDossier] FOREIGN KEY ([IdDossier]) REFERENCES [dossiers] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:31.704 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [attestations] (
    [Id] uniqueidentifier NOT NULL,
    [IdDemande] uniqueidentifier NOT NULL,
    [DateDelivrance] date NOT NULL,
    [DateExpiration] date NOT NULL,
    [Donnees] varbinary(max) NULL,
    [Extension] nvarchar(12) NOT NULL,
    CONSTRAINT [PK_attestations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_attestations_demandes_IdDemande] FOREIGN KEY ([IdDemande]) REFERENCES [demandes] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:32.308 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [documentsDemandes] (
    [Id] uniqueidentifier NOT NULL,
    [IdDemande] uniqueidentifier NOT NULL,
    [Nom] nvarchar(120) NULL,
    [Donnees] varbinary(max) NULL,
    [Extension] nvarchar(12) NOT NULL,
    [FilePath] nvarchar(512) NULL,
    [UtilisateurCreation] nvarchar(60) NULL,
    [DateCreation] datetime NULL,
    [UtilisateurModification] nvarchar(60) NULL,
    [DateModification] datetime NULL,
    CONSTRAINT [PK_documentsDemandes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_documentsDemandes_demandes_IdDemande] FOREIGN KEY ([IdDemande]) REFERENCES [demandes] ([Id]) ON DELETE CASCADE
);
2025-12-02 22:33:32.413 +01:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Libelle') AND [object_id] = OBJECT_ID(N'[adminUtilisateurTypes]'))
    SET IDENTITY_INSERT [adminUtilisateurTypes] ON;
INSERT INTO [adminUtilisateurTypes] ([Id], [Libelle])
VALUES ('7155e85b-08f3-4cb6-81d5-579e4a7f5899', N'Utilisateur Standard'),
('7e5b7d94-4f5d-4eff-9983-c8f846d3cee6', N'Administrateur'),
('b6f56eae-f5ce-4e1e-ba1e-8310b919df55', N'Auditeur');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Libelle') AND [object_id] = OBJECT_ID(N'[adminUtilisateurTypes]'))
    SET IDENTITY_INSERT [adminUtilisateurTypes] OFF;
2025-12-02 22:33:32.453 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'DateCreation', N'DateModification', N'Libelle', N'MobileBanking', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[modesReglements]'))
    SET IDENTITY_INSERT [modesReglements] ON;
INSERT INTO [modesReglements] ([Id], [Code], [DateCreation], [DateModification], [Libelle], [MobileBanking], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES ('07628d0b-c274-4c06-8ba9-fde3a316dc84', N'Virement', NULL, NULL, N'Virement bancaire', CAST(0 AS tinyint), NULL, NULL, NULL),
('1fb33086-961e-4bae-8295-7b6ec58c06f3', N'Cheque', NULL, NULL, N'Chèque', CAST(0 AS tinyint), NULL, NULL, NULL),
('64000d39-ae4c-41ef-ad26-473fbe711b45', N'Especes', NULL, NULL, N'Espèces', CAST(0 AS tinyint), NULL, NULL, NULL),
('b447ece5-d14b-435b-b999-6c83ea24328a', N'MobileBanking', NULL, NULL, N'Paiement mobile', CAST(1 AS tinyint), NULL, NULL, NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'DateCreation', N'DateModification', N'Libelle', N'MobileBanking', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[modesReglements]'))
    SET IDENTITY_INSERT [modesReglements] OFF;
2025-12-02 22:33:33.148 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'Libelle') AND [object_id] = OBJECT_ID(N'[statuts]'))
    SET IDENTITY_INSERT [statuts] ON;
INSERT INTO [statuts] ([Id], [Code], [Libelle])
VALUES ('048f9a42-5107-49c3-9d24-2dae0a2898cb', N'DevisValideSC', N'Devis validé par Chef Service'),
('08d8c5e4-0be5-4185-b29e-058f6f6cb99d', N'NouveauDossier', N'Nouvelle demande'),
('311e4102-4b53-486a-8169-2e8e5bf5eb7c', N'DevisValideTr', N'Devis validé par Trésorerie'),
('4e419ee9-1d27-4a2b-9e0b-b2fe46b44125', N'PaiementExpirer', N'Paiement expiré'),
('60b57c73-f261-4233-a488-308114f07cbf', N'DossierSigner', N'Attestation signée'),
('7c0e1236-ff81-4c74-9006-fab8670a5460', N'RefusDossier', N'Refus de la demande'),
('a772fcea-d134-4eed-a0f3-1bfb36d76282', N'InstructionApprouve', N'Instruction Approuvée'),
('a7ff862a-d81d-4a61-b83b-be5907d78304', N'PaiementRejete', N'Paiement non accepté'),
('b9701311-dd3c-4943-ab4a-16257882cdd5', N'ApprobationInstruction', N'Envoyé pour approbation'),
('c799d816-40bb-477a-a859-4b4404cb8e76', N'DevisEmit', N'Devis émis'),
('c7bf5de4-8116-4f4d-ada9-19e989f47802', N'DevisCreer', N'Devis créé'),
('cc2d7826-368f-4f69-a42e-a4e45c550d9c', N'DossierSignature', N'Attestation en signature'),
('d2ba611e-f001-4c87-a8b0-a706cdeb58d2', N'DossierPayer', N'Paiement effectué'),
('de3f3369-3d51-4c17-929b-be4218c5b789', N'Instruction', N'En cours d''instruction'),
('e3f823ce-f5e9-4d4c-b1ee-7e960d722d6f', N'DevisValide', N'Devis validé par client'),
('e7a6e022-b1a0-4a02-b994-47613ff9f6b8', N'DevisRefuser', N'Devis refusé par client');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'Libelle') AND [object_id] = OBJECT_ID(N'[statuts]'))
    SET IDENTITY_INSERT [statuts] OFF;
2025-12-02 22:33:33.822 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AdminProfilsId', N'ChangementMotPasse', N'Compte', N'DateCreation', N'DateModification', N'DerniereConnexion', N'Desactive', N'IdProfil', N'IdUtilisateurType', N'MotPasse', N'Nom', N'Prenoms', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[AdminUtilisateurs]'))
    SET IDENTITY_INSERT [AdminUtilisateurs] ON;
INSERT INTO [AdminUtilisateurs] ([Id], [AdminProfilsId], [ChangementMotPasse], [Compte], [DateCreation], [DateModification], [DerniereConnexion], [Desactive], [IdProfil], [IdUtilisateurType], [MotPasse], [Nom], [Prenoms], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES ('bec01699-3434-4310-88a9-d64bf08ae841', NULL, CAST(1 AS bit), N'admin', '2025-01-01T00:00:00.000', NULL, NULL, CAST(0 AS bit), NULL, '7e5b7d94-4f5d-4eff-9983-c8f846d3cee6', N'$2a$11$51MqlIg9ogM0KLIekjNLJuf1S2dwfE1EezbTfQmbE1RWgz6cW/bJK', N'Administrateur', N'ARPCE', NULL, N'SYSTEM_SEED', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AdminProfilsId', N'ChangementMotPasse', N'Compte', N'DateCreation', N'DateModification', N'DerniereConnexion', N'Desactive', N'IdProfil', N'IdUtilisateurType', N'MotPasse', N'Nom', N'Prenoms', N'Remarques', N'UtilisateurCreation', N'UtilisateurModification') AND [object_id] = OBJECT_ID(N'[AdminUtilisateurs]'))
    SET IDENTITY_INSERT [AdminUtilisateurs] OFF;
2025-12-02 22:33:34.199 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminJournal_DossierId] ON [adminJournal] ([DossierId]);
2025-12-02 22:33:34.201 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminJournal_IdEvenementType] ON [adminJournal] ([IdEvenementType]);
2025-12-02 22:33:34.202 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminProfilsAcces_IdAccess] ON [adminProfilsAcces] ([IdAccess]);
2025-12-02 22:33:34.204 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_adminProfilsUtilisateursLDAP_IdProfil] ON [adminProfilsUtilisateursLDAP] ([IdProfil]);
2025-12-02 22:33:34.214 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AdminUtilisateurs_AdminProfilsId] ON [AdminUtilisateurs] ([AdminProfilsId]);
2025-12-02 22:33:34.219 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AdminUtilisateurs_Compte] ON [AdminUtilisateurs] ([Compte]);
2025-12-02 22:33:34.224 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AdminUtilisateurs_IdProfil] ON [AdminUtilisateurs] ([IdProfil]);
2025-12-02 22:33:34.226 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AdminUtilisateurs_IdUtilisateurType] ON [AdminUtilisateurs] ([IdUtilisateurType]);
2025-12-02 22:33:34.227 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_attestations_IdDemande] ON [attestations] ([IdDemande]);
2025-12-02 22:33:34.228 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_commentaires_IdDossier] ON [commentaires] ([IdDossier]);
2025-12-02 22:33:34.509 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdCategorie] ON [demandes] ([IdCategorie]);
2025-12-02 22:33:34.511 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdDossier] ON [demandes] ([IdDossier]);
2025-12-02 22:33:34.512 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdMotifRejet] ON [demandes] ([IdMotifRejet]);
2025-12-02 22:33:34.514 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_demandes_IdProposition] ON [demandes] ([IdProposition]);
2025-12-02 22:33:34.518 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_devis_IdDossier] ON [devis] ([IdDossier]);
2025-12-02 22:33:34.519 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_documentsDemandes_IdDemande] ON [documentsDemandes] ([IdDemande]);
2025-12-02 22:33:34.522 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_documentsDossiers_IdDossier] ON [documentsDossiers] ([IdDossier]);
2025-12-02 22:33:34.524 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdAgentInstructeur] ON [dossiers] ([IdAgentInstructeur]);
2025-12-02 22:33:34.525 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdClient] ON [dossiers] ([IdClient]);
2025-12-02 22:33:34.527 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdModeReglement] ON [dossiers] ([IdModeReglement]);
2025-12-02 22:33:34.528 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_dossiers_IdStatut] ON [dossiers] ([IdStatut]);
2025-12-02 22:33:34.535 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251202213245_Initialisation', N'9.0.11');
2025-12-02 22:33:34.893 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-02 22:33:45.968 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 22:33:46.047 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 22:33:46.219 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 22:33:46.222 +01:00 [INF] Hosting environment: Development
2025-12-02 22:33:46.227 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 22:34:25.393 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-02 22:34:29.130 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 22:34:29.786 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 22:37:44.246 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 1) (DbType = Byte), @p2='?' (Size = 120), @p3='?' (Size = 4000), @p4='?' (Size = 120), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 120), @p8='?' (Size = 120), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (Size = 120), @p11='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminAccess] ([Id], [Ajouter], [Application], [Code], [Groupe], [Imprimer], [Inactif], [Libelle], [Page], [Supprimer], [Type], [Valider])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-12-02 22:37:44.278 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:37:55.529 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Application], [a].[Groupe], [a].[Libelle], [a].[Page], [a].[Type], CASE
    WHEN [a].[Inactif] = CAST(1 AS tinyint) AND [a].[Inactif] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Inactif], CASE
    WHEN [a].[Ajouter] = CAST(1 AS tinyint) AND [a].[Ajouter] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Ajouter], CASE
    WHEN [a].[Valider] = CAST(1 AS tinyint) AND [a].[Valider] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Valider], CASE
    WHEN [a].[Supprimer] = CAST(1 AS tinyint) AND [a].[Supprimer] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Supprimer], CASE
    WHEN [a].[Imprimer] = CAST(1 AS tinyint) AND [a].[Imprimer] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Imprimer]
FROM [adminAccess] AS [a]
ORDER BY [a].[Application], [a].[Groupe]
2025-12-02 22:38:59.346 +01:00 [ERR] Failed executing DbCommand (36ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 120), @p5='?' (Size = 512), @p6='?' (Size = 60), @p7='?' (Size = 60), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [adminProfils] ([Id], [Code], [DateCreation], [DateModification], [Libelle], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [adminProfilsAcces] ([IdAccess], [IdProfil], [Ajouter], [Imprimer], [Supprimer], [Valider])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13);
2025-12-02 22:38:59.408 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'BackOffice.Infrastructure.Persistence.BackOfficeDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.adminProfils', colonne 'Code'. Valeur tronquée : 'HOMO-DOS-CRE'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_adminProfilsAcces_adminProfils_IdProfil". Le conflit s'est produit dans la base de données "ArpceHomologation_BackOffice", table "dbo.adminProfils", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.adminProfils', colonne 'Code'. Valeur tronquée : 'HOMO-DOS-CRE'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_adminProfilsAcces_adminProfils_IdProfil". Le conflit s'est produit dans la base de données "ArpceHomologation_BackOffice", table "dbo.adminProfils", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-02 22:38:59.883 +01:00 [ERR] Une exception non gérée a été interceptée.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.adminProfils', colonne 'Code'. Valeur tronquée : 'HOMO-DOS-CRE'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_adminProfilsAcces_adminProfils_IdProfil". Le conflit s'est produit dans la base de données "ArpceHomologation_BackOffice", table "dbo.adminProfils", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BackOffice.Infrastructure.Persistence.BackOfficeDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\Persistence\BackOfficeDbContext.cs:line 123
   at BackOffice.Application.Features.Admin.Commands.CreateProfil.CreateProfilCommandHandler.Handle(CreateProfilCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Admin\Commands\CreateProfil\CreateProfilCommandHandler.cs:line 47
   at BackOffice.Api.Controllers.AdminController.CreateProfil(CreateProfilCommand command) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Controllers\AdminController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BackOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2025-12-02 22:41:46.384 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 12), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 120), @p5='?' (Size = 512), @p6='?' (Size = 60), @p7='?' (Size = 60), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [adminProfils] ([Id], [Code], [DateCreation], [DateModification], [Libelle], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [adminProfilsAcces] ([IdAccess], [IdProfil], [Ajouter], [Imprimer], [Supprimer], [Valider])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13);
2025-12-02 22:41:46.401 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:42:12.856 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Libelle]
FROM [adminUtilisateurTypes] AS [a]
2025-12-02 22:43:48.149 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Boolean), @p3='?' (Size = 100), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (DbType = Boolean), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 255), @p11='?' (Size = 100), @p12='?' (Size = 150), @p13='?' (Size = 512), @p14='?' (Size = 60), @p15='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AdminUtilisateurs] ([Id], [AdminProfilsId], [ChangementMotPasse], [Compte], [DateCreation], [DateModification], [DerniereConnexion], [Desactive], [IdProfil], [IdUtilisateurType], [MotPasse], [Nom], [Prenoms], [Remarques], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-12-02 22:43:48.159 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:44:12.312 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AdminUtilisateurs] AS [a]
2025-12-02 22:44:12.440 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdminProfilsId], [a1].[ChangementMotPasse], [a1].[Compte], [a1].[DateCreation], [a1].[DateModification], [a1].[DerniereConnexion], [a1].[Desactive], [a1].[IdProfil], [a1].[IdUtilisateurType], [a1].[MotPasse], [a1].[Nom], [a1].[Prenoms], [a1].[Remarques], [a1].[UtilisateurCreation], [a1].[UtilisateurModification], [a0].[Id], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
    FROM [AdminUtilisateurs] AS [a]
    ORDER BY [a].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminUtilisateurTypes] AS [a0] ON [a1].[IdUtilisateurType] = [a0].[Id]
ORDER BY [a1].[DateCreation] DESC
2025-12-02 22:46:01.533 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2025-12-02 22:46:01.582 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_IdProfil_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [adminProfils] AS [a]
        WHERE [a].[Id] = @__request_IdProfil_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-02 22:46:01.607 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [IdProfil] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 22:46:01.617 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:46:45.842 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 22:47:21.865 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 22:47:22.119 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 22:48:28.576 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (Size = 60), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 30), @p5='?' (Size = 60), @p6='?' (Size = 60), @p7='?' (Size = 30), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 120), @p12='?' (DbType = Boolean), @p13='?' (Size = 255), @p14='?' (Size = 100), @p15='?' (Size = 120), @p16='?' (Size = 60), @p17='?' (Size = 512), @p18='?' (Size = 20), @p19='?' (Size = 60), @p20='?' (Size = 60), @p21='?' (Size = 6), @p22='?' (DbType = DateTime2), @p23='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [clients] ([Id], [Adresse], [Bp], [ChangementMotPasse], [Code], [ContactFonction], [ContactNom], [ContactTelephone], [DateCreation], [DateModification], [Desactive], [Email], [IsVerified], [MotPasse], [Pays], [RaisonSociale], [RegistreCommerce], [Remarques], [TypeClient], [UtilisateurCreation], [UtilisateurModification], [VerificationCode], [VerificationTokenExpiry], [Ville])
OUTPUT INSERTED.[NiveauValidation]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-12-02 22:48:28.596 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:48:57.943 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (Size = 60), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 30), @p5='?' (Size = 60), @p6='?' (Size = 60), @p7='?' (Size = 30), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 120), @p12='?' (DbType = Boolean), @p13='?' (Size = 255), @p14='?' (Size = 100), @p15='?' (Size = 120), @p16='?' (Size = 60), @p17='?' (Size = 512), @p18='?' (Size = 20), @p19='?' (Size = 60), @p20='?' (Size = 60), @p21='?' (Size = 6), @p22='?' (DbType = DateTime2), @p23='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [clients] ([Id], [Adresse], [Bp], [ChangementMotPasse], [Code], [ContactFonction], [ContactNom], [ContactTelephone], [DateCreation], [DateModification], [Desactive], [Email], [IsVerified], [MotPasse], [Pays], [RaisonSociale], [RegistreCommerce], [Remarques], [TypeClient], [UtilisateurCreation], [UtilisateurModification], [VerificationCode], [VerificationTokenExpiry], [Ville])
OUTPUT INSERTED.[NiveauValidation]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-12-02 22:48:57.954 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:49:12.866 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 22:49:12.948 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c0].[Id], [c0].[Adresse], [c0].[Bp], [c0].[ChangementMotPasse], [c0].[Code], [c0].[ContactFonction], [c0].[ContactNom], [c0].[ContactTelephone], [c0].[DateCreation], [c0].[DateModification], [c0].[Desactive], [c0].[Email], [c0].[IsVerified], [c0].[MotPasse], [c0].[NiveauValidation], [c0].[Pays], [c0].[RaisonSociale], [c0].[RegistreCommerce], [c0].[Remarques], [c0].[TypeClient], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [c0].[VerificationCode], [c0].[VerificationTokenExpiry], [c0].[Ville], [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM (
    SELECT [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
    FROM [clients] AS [c]
    ORDER BY [c].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c0]
LEFT JOIN [dossiers] AS [d] ON [c0].[Id] = [d].[IdClient]
ORDER BY [c0].[DateCreation] DESC, [c0].[Id]
2025-12-02 22:49:32.308 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminJournal] AS [a]
2025-12-02 22:49:32.332 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdresseIP], [a1].[Application], [a1].[DateEvenement], [a1].[DossierId], [a1].[IdDossier], [a1].[IdEvenementType], [a1].[Libelle], [a1].[Page], [a1].[Utilisateur], [a0].[Id], [a0].[Code], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdresseIP], [a].[Application], [a].[DateEvenement], [a].[DossierId], [a].[IdDossier], [a].[IdEvenementType], [a].[Libelle], [a].[Page], [a].[Utilisateur]
    FROM [adminJournal] AS [a]
    ORDER BY [a].[DateEvenement] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminEvenementsTypes] AS [a0] ON [a1].[IdEvenementType] = [a0].[Id]
ORDER BY [a1].[DateEvenement] DESC
2025-12-02 22:50:46.475 +01:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 120), @p6='?' (DbType = Int32), @p7='?' (Size = 512), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Currency), @p11='?' (DbType = Byte), @p12='?' (DbType = Int32), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (Size = 60), @p16='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [Code], [DateCreation], [DateModification], [FormuleHomologation], [Libelle], [QuantiteReference], [Remarques], [TarifControle], [TarifEtude], [TarifHomologation], [TarifHomologationParLot], [TarifHomologationQuantiteParLot], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-12-02 22:50:46.488 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'BackOffice.Infrastructure.Persistence.BackOfficeDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'EQP-RT-2025-'.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'EQP-RT-2025-'.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-02 22:50:46.828 +01:00 [ERR] Une exception non gérée a été interceptée.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'EQP-RT-2025-'.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BackOffice.Infrastructure.Persistence.BackOfficeDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\Persistence\BackOfficeDbContext.cs:line 123
   at BackOffice.Application.Features.Categories.Commands.CreateCategorie.CreateCategorieCommandHandler.Handle(CreateCategorieCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Categories\Commands\CreateCategorie\CreateCategorieCommandHandler.cs:line 37
   at BackOffice.Api.Controllers.CategoriesController.CreateCategorie(CreateCategorieCommand command) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Controllers\CategoriesController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BackOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2025-12-02 22:54:22.860 +01:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 120), @p6='?' (DbType = Int32), @p7='?' (Size = 512), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Currency), @p11='?' (DbType = Byte), @p12='?' (DbType = Int32), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (Size = 60), @p16='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [Code], [DateCreation], [DateModification], [FormuleHomologation], [Libelle], [QuantiteReference], [Remarques], [TarifControle], [TarifEtude], [TarifHomologation], [TarifHomologationParLot], [TarifHomologationQuantiteParLot], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-12-02 22:54:22.868 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'BackOffice.Infrastructure.Persistence.BackOfficeDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'EQP-RT-2025-'.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'EQP-RT-2025-'.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-02 22:54:23.225 +01:00 [ERR] Une exception non gérée a été interceptée.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BackOffice.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'EQP-RT-2025-'.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9c865d5-7642-4bca-bb2c-9d2966dd129d
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BackOffice.Infrastructure.Persistence.BackOfficeDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\Persistence\BackOfficeDbContext.cs:line 123
   at BackOffice.Application.Features.Categories.Commands.CreateCategorie.CreateCategorieCommandHandler.Handle(CreateCategorieCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Categories\Commands\CreateCategorie\CreateCategorieCommandHandler.cs:line 37
   at BackOffice.Api.Controllers.CategoriesController.CreateCategorie(CreateCategorieCommand command) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Controllers\CategoriesController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BackOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2025-12-02 22:56:34.702 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 12), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 120), @p6='?' (DbType = Int32), @p7='?' (Size = 512), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Currency), @p11='?' (DbType = Byte), @p12='?' (DbType = Int32), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (Size = 60), @p16='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [Code], [DateCreation], [DateModification], [FormuleHomologation], [Libelle], [QuantiteReference], [Remarques], [TarifControle], [TarifEtude], [TarifHomologation], [TarifHomologationParLot], [TarifHomologationQuantiteParLot], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-12-02 22:56:34.710 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:56:58.005 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 12), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 120), @p6='?' (DbType = Int32), @p7='?' (Size = 512), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Currency), @p11='?' (DbType = Byte), @p12='?' (DbType = Int32), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (Size = 60), @p16='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [Code], [DateCreation], [DateModification], [FormuleHomologation], [Libelle], [QuantiteReference], [Remarques], [TarifControle], [TarifEtude], [TarifHomologation], [TarifHomologationParLot], [TarifHomologationQuantiteParLot], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-12-02 22:56:58.014 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:57:27.930 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_TypeEquipement_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Libelle], [c].[TypeEquipement], [c].[TypeClient], [c].[TarifEtude], [c].[TarifHomologation], [c].[TarifControle], [c].[FormuleHomologation], [c].[QuantiteReference], [c].[Remarques]
FROM [categoriesEquipements] AS [c]
WHERE [c].[TypeEquipement] = @__request_TypeEquipement_0
2025-12-02 22:57:52.083 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_TypeEquipement_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Libelle], [c].[TypeEquipement], [c].[TypeClient], [c].[TarifEtude], [c].[TarifHomologation], [c].[TarifControle], [c].[FormuleHomologation], [c].[QuantiteReference], [c].[Remarques]
FROM [categoriesEquipements] AS [c]
WHERE [c].[TypeEquipement] = @__request_TypeEquipement_0
2025-12-02 22:58:22.630 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_TypeEquipement_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Libelle], [c].[TypeEquipement], [c].[TypeClient], [c].[TarifEtude], [c].[TarifHomologation], [c].[TarifControle], [c].[FormuleHomologation], [c].[QuantiteReference], [c].[Remarques]
FROM [categoriesEquipements] AS [c]
WHERE [c].[TypeEquipement] = @__request_TypeEquipement_0
2025-12-02 22:58:43.109 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Code], [c].[DateCreation], [c].[DateModification], [c].[FormuleHomologation], [c].[Libelle], [c].[QuantiteReference], [c].[Remarques], [c].[TarifControle], [c].[TarifEtude], [c].[TarifHomologation], [c].[TarifHomologationParLot], [c].[TarifHomologationQuantiteParLot], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [categoriesEquipements] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-02 22:58:43.136 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categoriesEquipements]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-02 22:58:43.155 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 22:58:52.374 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_TypeEquipement_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Libelle], [c].[TypeEquipement], [c].[TypeClient], [c].[TarifEtude], [c].[TarifHomologation], [c].[TarifControle], [c].[FormuleHomologation], [c].[QuantiteReference], [c].[Remarques]
FROM [categoriesEquipements] AS [c]
WHERE [c].[TypeEquipement] = @__request_TypeEquipement_0
2025-12-02 23:06:03.756 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 23:06:03.971 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 23:06:44.679 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 23:06:44.696 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c0].[Id], [c0].[Adresse], [c0].[Bp], [c0].[ChangementMotPasse], [c0].[Code], [c0].[ContactFonction], [c0].[ContactNom], [c0].[ContactTelephone], [c0].[DateCreation], [c0].[DateModification], [c0].[Desactive], [c0].[Email], [c0].[IsVerified], [c0].[MotPasse], [c0].[NiveauValidation], [c0].[Pays], [c0].[RaisonSociale], [c0].[RegistreCommerce], [c0].[Remarques], [c0].[TypeClient], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [c0].[VerificationCode], [c0].[VerificationTokenExpiry], [c0].[Ville], [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM (
    SELECT [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
    FROM [clients] AS [c]
    ORDER BY [c].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c0]
LEFT JOIN [dossiers] AS [d] ON [c0].[Id] = [d].[IdClient]
ORDER BY [c0].[DateCreation] DESC, [c0].[Id]
2025-12-02 23:11:30.620 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
2025-12-02 23:13:41.138 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
2025-12-02 23:13:41.202 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[DateCreation], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [s].[Id], [s].[Code], [s].[Libelle], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM (
    SELECT [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
    FROM [dossiers] AS [d]
    ORDER BY [d].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
INNER JOIN [statuts] AS [s] ON [d0].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d1] ON [d0].[Id] = [d1].[IdDossier]
ORDER BY [d0].[DateCreation] DESC, [d0].[Id], [c].[Id], [s].[Id]
2025-12-02 23:14:45.007 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AdminUtilisateurs] AS [a]
2025-12-02 23:14:45.021 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 23:14:45.050 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[NiveauValidation] = 2
2025-12-02 23:14:45.076 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminProfilsUtilisateursLDAP] AS [a]
2025-12-02 23:14:45.106 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[TypeClient] = N'Particulier'
2025-12-02 23:14:45.121 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[TypeClient] = N'Entreprise'
2025-12-02 23:14:45.139 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminProfils] AS [a]
2025-12-02 23:14:45.152 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminAccess] AS [a]
2025-12-02 23:15:15.073 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [s].[Code] = N'PaiementExpirer'
2025-12-02 23:15:15.091 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [s].[Code] = N'DevisPaiement'
2025-12-02 23:15:15.107 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [s].[Code] = N'DossierPayer'
2025-12-02 23:15:15.122 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [s].[Code] = N'DevisValide'
2025-12-02 23:15:15.134 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [s].[Code] = N'DevisRefuser'
2025-12-02 23:15:15.144 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [s].[Code] = N'DevisEmit'
2025-12-02 23:15:34.264 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminJournal] AS [a]
2025-12-02 23:15:34.309 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdresseIP], [a1].[Application], [a1].[DateEvenement], [a1].[DossierId], [a1].[IdDossier], [a1].[IdEvenementType], [a1].[Libelle], [a1].[Page], [a1].[Utilisateur], [a0].[Id], [a0].[Code], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdresseIP], [a].[Application], [a].[DateEvenement], [a].[DossierId], [a].[IdDossier], [a].[IdEvenementType], [a].[Libelle], [a].[Page], [a].[Utilisateur]
    FROM [adminJournal] AS [a]
    ORDER BY [a].[DateEvenement] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminEvenementsTypes] AS [a0] ON [a1].[IdEvenementType] = [a0].[Id]
ORDER BY [a1].[DateEvenement] DESC
2025-12-02 23:16:13.560 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 23:16:13.859 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 23:16:52.290 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminJournal] AS [a]
2025-12-02 23:16:52.312 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdresseIP], [a1].[Application], [a1].[DateEvenement], [a1].[DossierId], [a1].[IdDossier], [a1].[IdEvenementType], [a1].[Libelle], [a1].[Page], [a1].[Utilisateur], [a0].[Id], [a0].[Code], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdresseIP], [a].[Application], [a].[DateEvenement], [a].[DossierId], [a].[IdDossier], [a].[IdEvenementType], [a].[Libelle], [a].[Page], [a].[Utilisateur]
    FROM [adminJournal] AS [a]
    ORDER BY [a].[DateEvenement] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminEvenementsTypes] AS [a0] ON [a1].[IdEvenementType] = [a0].[Id]
ORDER BY [a1].[DateEvenement] DESC
2025-12-02 23:25:48.728 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 23:25:48.795 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 23:25:48.989 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 23:25:48.992 +01:00 [INF] Hosting environment: Development
2025-12-02 23:25:49.016 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 23:30:00.806 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 23:30:00.879 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 23:30:01.014 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 23:30:01.018 +01:00 [INF] Hosting environment: Development
2025-12-02 23:30:01.021 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 23:30:35.354 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-02 23:30:38.741 +01:00 [INF] Executed DbCommand (82ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 23:30:39.687 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 23:32:07.095 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 23:32:07.277 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c0].[Id], [c0].[Adresse], [c0].[Bp], [c0].[ChangementMotPasse], [c0].[Code], [c0].[ContactFonction], [c0].[ContactNom], [c0].[ContactTelephone], [c0].[DateCreation], [c0].[DateModification], [c0].[Desactive], [c0].[Email], [c0].[IsVerified], [c0].[MotPasse], [c0].[NiveauValidation], [c0].[Pays], [c0].[RaisonSociale], [c0].[RegistreCommerce], [c0].[Remarques], [c0].[TypeClient], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [c0].[VerificationCode], [c0].[VerificationTokenExpiry], [c0].[Ville], [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM (
    SELECT [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
    FROM [clients] AS [c]
    ORDER BY [c].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c0]
LEFT JOIN [dossiers] AS [d] ON [c0].[Id] = [d].[IdClient]
ORDER BY [c0].[DateCreation] DESC, [c0].[Id]
2025-12-02 23:32:37.902 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-02 23:32:38.011 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 1) (DbType = Byte), @p2='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [clients] SET [DateModification] = @p0, [Desactive] = @p1, [UtilisateurModification] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-12-02 23:33:25.260 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 23:34:52.453 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminJournal] AS [a]
2025-12-02 23:34:52.477 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdresseIP], [a1].[Application], [a1].[DateEvenement], [a1].[DossierId], [a1].[IdDossier], [a1].[IdEvenementType], [a1].[Libelle], [a1].[Page], [a1].[Utilisateur], [a0].[Id], [a0].[Code], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdresseIP], [a].[Application], [a].[DateEvenement], [a].[DossierId], [a].[IdDossier], [a].[IdEvenementType], [a].[Libelle], [a].[Page], [a].[Utilisateur]
    FROM [adminJournal] AS [a]
    ORDER BY [a].[DateEvenement] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminEvenementsTypes] AS [a0] ON [a1].[IdEvenementType] = [a0].[Id]
ORDER BY [a1].[DateEvenement] DESC
2025-12-02 23:37:33.054 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 23:37:33.066 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c0].[Id], [c0].[Adresse], [c0].[Bp], [c0].[ChangementMotPasse], [c0].[Code], [c0].[ContactFonction], [c0].[ContactNom], [c0].[ContactTelephone], [c0].[DateCreation], [c0].[DateModification], [c0].[Desactive], [c0].[Email], [c0].[IsVerified], [c0].[MotPasse], [c0].[NiveauValidation], [c0].[Pays], [c0].[RaisonSociale], [c0].[RegistreCommerce], [c0].[Remarques], [c0].[TypeClient], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [c0].[VerificationCode], [c0].[VerificationTokenExpiry], [c0].[Ville], [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM (
    SELECT [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
    FROM [clients] AS [c]
    ORDER BY [c].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c0]
LEFT JOIN [dossiers] AS [d] ON [c0].[Id] = [d].[IdClient]
ORDER BY [c0].[DateCreation] DESC, [c0].[Id]
2025-12-02 23:37:52.588 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-02 23:38:01.932 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 23:49:44.919 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 23:49:44.998 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 23:49:45.125 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 23:49:45.128 +01:00 [INF] Hosting environment: Development
2025-12-02 23:49:45.130 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 23:50:27.554 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-02 23:50:30.743 +01:00 [INF] Executed DbCommand (75ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 23:50:31.699 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 23:51:09.431 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminJournal] AS [a]
2025-12-02 23:51:09.539 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdresseIP], [a1].[Application], [a1].[DateEvenement], [a1].[DossierId], [a1].[IdDossier], [a1].[IdEvenementType], [a1].[Libelle], [a1].[Page], [a1].[Utilisateur], [a0].[Id], [a0].[Code], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdresseIP], [a].[Application], [a].[DateEvenement], [a].[DossierId], [a].[IdDossier], [a].[IdEvenementType], [a].[Libelle], [a].[Page], [a].[Utilisateur]
    FROM [adminJournal] AS [a]
    ORDER BY [a].[DateEvenement] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminEvenementsTypes] AS [a0] ON [a1].[IdEvenementType] = [a0].[Id]
ORDER BY [a1].[DateEvenement] DESC
2025-12-02 23:51:25.450 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 23:51:25.536 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c0].[Id], [c0].[Adresse], [c0].[Bp], [c0].[ChangementMotPasse], [c0].[Code], [c0].[ContactFonction], [c0].[ContactNom], [c0].[ContactTelephone], [c0].[DateCreation], [c0].[DateModification], [c0].[Desactive], [c0].[Email], [c0].[IsVerified], [c0].[MotPasse], [c0].[NiveauValidation], [c0].[Pays], [c0].[RaisonSociale], [c0].[RegistreCommerce], [c0].[Remarques], [c0].[TypeClient], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [c0].[VerificationCode], [c0].[VerificationTokenExpiry], [c0].[Ville], [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM (
    SELECT [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
    FROM [clients] AS [c]
    ORDER BY [c].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c0]
LEFT JOIN [dossiers] AS [d] ON [c0].[Id] = [d].[IdClient]
ORDER BY [c0].[DateCreation] DESC, [c0].[Id]
2025-12-02 23:51:49.350 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-02 23:51:49.477 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 23:51:49.507 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2025-12-02 23:52:07.862 +01:00 [INF] Now listening on: https://localhost:7238
2025-12-02 23:52:07.905 +01:00 [INF] Now listening on: http://localhost:5126
2025-12-02 23:52:08.043 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-02 23:52:08.047 +01:00 [INF] Hosting environment: Development
2025-12-02 23:52:08.050 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2025-12-02 23:52:36.234 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-02 23:52:39.593 +01:00 [INF] Executed DbCommand (93ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Compte] = @__request_Compte_0
2025-12-02 23:52:40.545 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-02 23:53:12.932 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
2025-12-02 23:53:13.092 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c0].[Id], [c0].[Adresse], [c0].[Bp], [c0].[ChangementMotPasse], [c0].[Code], [c0].[ContactFonction], [c0].[ContactNom], [c0].[ContactTelephone], [c0].[DateCreation], [c0].[DateModification], [c0].[Desactive], [c0].[Email], [c0].[IsVerified], [c0].[MotPasse], [c0].[NiveauValidation], [c0].[Pays], [c0].[RaisonSociale], [c0].[RegistreCommerce], [c0].[Remarques], [c0].[TypeClient], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [c0].[VerificationCode], [c0].[VerificationTokenExpiry], [c0].[Ville], [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM (
    SELECT [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
    FROM [clients] AS [c]
    ORDER BY [c].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c0]
LEFT JOIN [dossiers] AS [d] ON [c0].[Id] = [d].[IdClient]
ORDER BY [c0].[DateCreation] DESC, [c0].[Id]
2025-12-02 23:53:34.126 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-02 23:53:34.234 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2025-12-02 23:53:34.265 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2025-12-02 23:53:34.372 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-12-02 23:53:41.130 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [adminJournal] AS [a]
2025-12-02 23:53:41.173 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[AdresseIP], [a1].[Application], [a1].[DateEvenement], [a1].[DossierId], [a1].[IdDossier], [a1].[IdEvenementType], [a1].[Libelle], [a1].[Page], [a1].[Utilisateur], [a0].[Id], [a0].[Code], [a0].[Libelle]
FROM (
    SELECT [a].[Id], [a].[AdresseIP], [a].[Application], [a].[DateEvenement], [a].[DossierId], [a].[IdDossier], [a].[IdEvenementType], [a].[Libelle], [a].[Page], [a].[Utilisateur]
    FROM [adminJournal] AS [a]
    ORDER BY [a].[DateEvenement] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [a1]
INNER JOIN [adminEvenementsTypes] AS [a0] ON [a1].[IdEvenementType] = [a0].[Id]
ORDER BY [a1].[DateEvenement] DESC
2025-12-02 23:31:45.563 +00:00 [FTL] L'application BackOffice s'est arrêtée de manière inattendue sur le VPS.
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at System.Diagnostics.DiagnosticSource.Write[T](String name, T value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\Administrator\Downloads\Backend\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Program.cs:line 137
2025-12-02 23:33:59.543 +00:00 [FTL] L'application BackOffice s'est arrêtée de manière inattendue sur le VPS.
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at System.Diagnostics.DiagnosticSource.Write[T](String name, T value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\Administrator\Downloads\Backend\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Program.cs:line 137
