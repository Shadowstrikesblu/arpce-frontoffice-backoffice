2026-02-26 11:20:08.825 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 11:20:18.282 +01:00 [ERR] Failed executing DbCommand (235ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 11:20:18.315 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 11:20:18.425 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 11:20:18.607 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BackOffice.Infrastructure.Persistence.BackOfficeDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Nom de colonne non valide : 'MontantTotal'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:af56e00f-a45a-4ae6-9130-7be2c0230346
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Nom de colonne non valide : 'MontantTotal'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:af56e00f-a45a-4ae6-9130-7be2c0230346
Error Number:207,State:1,Class:16
2026-02-26 11:20:20.274 +01:00 [ERR] Erreur dans le cycle d'automatisation des dossiers.
Microsoft.Data.SqlClient.SqlException (0x80131904): Nom de colonne non valide : 'MontantTotal'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at BackOffice.Infrastructure.BackgroundServices.DossierAutomationWorker.ProcessPaiementsEnRetard(IApplicationDbContext context, IEmailService email, IDevisGeneratorService devisGenerator) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\BackgroundServices\DossierAutomationWorker.cs:line 64
   at BackOffice.Infrastructure.BackgroundServices.DossierAutomationWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\BackgroundServices\DossierAutomationWorker.cs:line 40
ClientConnectionId:af56e00f-a45a-4ae6-9130-7be2c0230346
Error Number:207,State:1,Class:16
2026-02-26 11:20:20.505 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 11:20:20.725 +01:00 [INF] Hosting environment: Development
2026-02-26 11:20:20.856 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 11:26:12.933 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 11:26:15.833 +01:00 [ERR] Failed executing DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 11:26:15.879 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 11:26:15.883 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 11:26:15.910 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BackOffice.Infrastructure.Persistence.BackOfficeDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Nom de colonne non valide : 'MontantTotal'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:adc314ae-5693-405e-8c93-9fe03e842797
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Nom de colonne non valide : 'MontantTotal'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:adc314ae-5693-405e-8c93-9fe03e842797
Error Number:207,State:1,Class:16
2026-02-26 11:26:16.053 +01:00 [ERR] Erreur dans le cycle d'automatisation des dossiers.
Microsoft.Data.SqlClient.SqlException (0x80131904): Nom de colonne non valide : 'MontantTotal'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at BackOffice.Infrastructure.BackgroundServices.DossierAutomationWorker.ProcessPaiementsEnRetard(IApplicationDbContext context, IEmailService email, IDevisGeneratorService devisGenerator) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\BackgroundServices\DossierAutomationWorker.cs:line 64
   at BackOffice.Infrastructure.BackgroundServices.DossierAutomationWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\BackgroundServices\DossierAutomationWorker.cs:line 40
ClientConnectionId:adc314ae-5693-405e-8c93-9fe03e842797
Error Number:207,State:1,Class:16
2026-02-26 11:26:16.190 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 11:26:16.193 +01:00 [INF] Hosting environment: Development
2026-02-26 11:26:16.197 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 11:27:32.730 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 11:27:33.071 +01:00 [INF] Executed DbCommand (195ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 11:27:33.991 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 11:37:59.830 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__request_NumeroDossier_0='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[Numero] = @__request_NumeroDossier_0
2026-02-26 11:37:59.892 +01:00 [ERR] Erreur lors du paiement caisse pour Hom-26-0001
System.Exception: Dossier N° Hom-26-0001 introuvable.
   at BackOffice.Application.Features.Paiements.Commands.EnregistrerPaiementCaisse.EnregistrerPaiementCaisseCommandHandler.Handle(EnregistrerPaiementCaisseCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Paiements\Commands\EnregistrerPaiementCaisse\EnregistrerPaiementCaisseCommandHandler.cs:line 45
2026-02-26 11:38:00.102 +01:00 [ERR] Une exception non gérée a été interceptée.
System.Exception: Dossier N° Hom-26-0001 introuvable.
   at BackOffice.Application.Features.Paiements.Commands.EnregistrerPaiementCaisse.EnregistrerPaiementCaisseCommandHandler.Handle(EnregistrerPaiementCaisseCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Paiements\Commands\EnregistrerPaiementCaisse\EnregistrerPaiementCaisseCommandHandler.cs:line 45
   at BackOffice.Application.Features.Paiements.Commands.EnregistrerPaiementCaisse.EnregistrerPaiementCaisseCommandHandler.Handle(EnregistrerPaiementCaisseCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Paiements\Commands\EnregistrerPaiementCaisse\EnregistrerPaiementCaisseCommandHandler.cs:line 86
   at BackOffice.Api.Controllers.TresorerieController.EnregistrerPaiement(EnregistrerPaiementCaisseCommand command) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Controllers\TrésorerieController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BackOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2026-02-26 11:43:53.570 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_NumeroDossier_0='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[Numero] = @__request_NumeroDossier_0
2026-02-26 11:43:53.840 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[Id] = @__dossierId_0
2026-02-26 11:43:54.755 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dossier_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__dossier_Id_0
2026-02-26 11:43:54.827 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = N'PaiementCaisse'
2026-02-26 11:43:55.048 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = 60), @p2='?' (Size = 1) (DbType = Byte), @p3='?' (Size = 60), @p5='?' (DbType = Guid), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = -1) (DbType = Binary), @p9='?' (Size = 12), @p10='?' (Size = 512), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (Size = 120), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 60), @p16='?' (Size = 60), @p17='?' (DbType = Guid), @p18='?' (DbType = Int64), @p19='?' (DbType = Int64), @p20='?' (Size = -1) (DbType = Binary), @p21='?' (Size = 12), @p22='?' (Size = 512), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (Size = 120), @p26='?' (Size = 1) (DbType = Byte), @p27='?' (Size = 60), @p28='?' (Size = 60), @p32='?' (DbType = Guid), @p29='?' (DbType = Int64), @p30='?' (DbType = Guid), @p31='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [devis] SET [DateModification] = @p0, [PaiementMobileId] = @p1, [PaiementOk] = @p2, [UtilisateurModification] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [documentsDossiers] ([Id], [DateCreation], [DateModification], [Donnees], [Extension], [FilePath], [IdDossier], [Libelle], [Nom], [Type], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16),
(@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
UPDATE [dossiers] SET [DateModification] = @p29, [IdStatut] = @p30, [UtilisateurModification] = @p31
OUTPUT 1
WHERE [Id] = @p32;
2026-02-26 11:43:55.100 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entityId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[Id] = @__entityId_0
2026-02-26 11:43:55.197 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (Size = 150), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 1000), @p10='?' (Size = 100), @p11='?' (Size = 20), @p12='?' (Size = 500), @p13='?' (Size = 200), @p14='?' (Size = 50), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [notifications] ([Id], [Canal], [DateCreation], [DateEnvoi], [DateModification], [Destinataire], [EntityId], [IsBroadcast], [IsRead], [Message], [ProfilCode], [StatutEnvoi], [TargetUrl], [Title], [Type], [UserId], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-02-26 11:43:55.248 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__mapping_Item1_0='?' (Size = 12)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Email], [a].[Compte], [a].[Nom], [a].[Prenoms]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a0].[Id] IS NOT NULL AND [a0].[Code] = @__mapping_Item1_0 AND [a].[Desactive] = CAST(0 AS bit)
2026-02-26 11:43:55.255 +01:00 [INF] Paiement caisse enregistré pour le dossier Hom-26-0001
2026-02-26 11:56:04.780 +01:00 [ERR] Une exception non gérée a été interceptée.
System.ArgumentException: Type de document non valide. Utilisez 'dossier', 'demande' ou 'devis'.
   at BackOffice.Application.Features.Demandes.Queries.DownloadDocument.DownloadDocumentQueryHandler.Handle(DownloadDocumentQuery request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Demandes\Queries\DownloadDocument\DownloadDocumentQueryHandler.cs:line 93
   at BackOffice.Api.Controllers.DocumentsController.DownloadDocument(String type, Guid id) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Controllers\DocumentsController.cs:line 61
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BackOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2026-02-26 12:02:47.530 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 12:02:50.927 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 12:02:50.932 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 12:02:50.934 +01:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 12:02:51.146 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 12:02:51.150 +01:00 [INF] Hosting environment: Development
2026-02-26 12:02:51.154 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 12:02:51.803 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (DbType = Currency), @p2='?' (Size = 60), @p7='?' (DbType = Guid), @p4='?' (DbType = Int64), @p5='?' (DbType = Boolean), @p6='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [devis] SET [DateModification] = @p0, [MontantPenalite] = @p1, [UtilisateurModification] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [dossiers] SET [DateModification] = @p4, [PenaliteAppliquee] = @p5, [UtilisateurModification] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2026-02-26 12:02:52.015 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 12:02:52.723 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 12:02:52.811 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (Size = -1) (DbType = Binary), @p3='?' (Size = 12), @p4='?' (Size = 512), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (Size = 120), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 60), @p10='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateCreation] = @p0, [DateModification] = @p1, [Donnees] = @p2, [Extension] = @p3, [FilePath] = @p4, [IdDossier] = @p5, [Libelle] = @p6, [Nom] = @p7, [Type] = @p8, [UtilisateurCreation] = @p9, [UtilisateurModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 12:02:56.381 +01:00 [INF] Email avec pièces jointes envoyé avec succès à orichekaya2@gmail.com
2026-02-26 12:02:56.384 +01:00 [INF] Pénalité de 10% appliquée au dossier Hom-26-9999. Nouvelle facture générée.
2026-02-26 12:02:56.444 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 12:03:23.102 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 12:03:23.204 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 12:03:23.551 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 12:04:20.592 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 12:04:23.720 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 12:21:56.026 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 12:21:59.889 +01:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 12:21:59.890 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 12:21:59.908 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 12:22:00.101 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 12:22:00.105 +01:00 [INF] Hosting environment: Development
2026-02-26 12:22:00.109 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 12:22:00.348 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 12:22:43.787 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 12:22:43.948 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 12:22:44.449 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 12:25:39.611 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 12:25:39.788 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 12:25:39.819 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 12:25:40.014 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 12:25:40.032 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 12:25:40.052 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 12:25:40.100 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 12:25:40.176 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 12:26:43.815 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 12:26:43.825 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 12:26:43.836 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 12:26:43.864 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p12='?' (DbType = Guid), @p10='?' (DbType = Int64), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10, [IdStatut] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2026-02-26 12:26:43.877 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 12:26:43.940 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 12:26:44.714 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 12:26:44.812 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = -1) (DbType = Binary), @p4='?' (Size = 12), @p5='?' (Size = 512), @p6='?' (DbType = Guid), @p7='?' (Size = 4000), @p8='?' (Size = 120), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (Size = 60), @p11='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [documentsDossiers] ([Id], [DateCreation], [DateModification], [Donnees], [Extension], [FilePath], [IdDossier], [Libelle], [Nom], [Type], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-02-26 12:26:44.825 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 12:26:44.837 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 12:26:44.855 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 12:27:24.522 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 12:27:24.546 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 12:27:27.646 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 12:27:27.658 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 12:52:18.786 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 12:52:22.584 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 12:52:22.618 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 12:52:22.630 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 12:52:22.848 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 12:52:22.856 +01:00 [INF] Hosting environment: Development
2026-02-26 12:52:22.859 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 12:52:23.088 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 12:52:52.308 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 12:52:52.481 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 12:52:53.329 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 12:54:06.509 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 12:54:06.625 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 12:54:06.718 +01:00 [ERR] Erreur changement statut "b8d03eec-fdb4-4ab7-9ccb-f6a0821d52ae"
System.Exception: Statut introuvable.
   at BackOffice.Application.Features.Dossiers.Commands.ChangeStatus.ChangeDossierStatusCommandHandler.Handle(ChangeDossierStatusCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Dossiers\Commands\ChangeStatus\ChangeDossierStatusCommandHandler.cs:line 53
2026-02-26 12:54:27.553 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 12:54:27.559 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 12:54:27.583 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 12:54:27.753 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 12:54:27.775 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 12:54:27.832 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 12:54:28.475 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 12:54:28.583 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateModification] = @p0, [Donnees] = @p1, [UtilisateurModification] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2026-02-26 12:54:28.603 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 12:54:28.643 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 12:54:28.698 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 12:55:01.377 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 12:55:01.396 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 12:55:07.622 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 12:55:07.631 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:11:54.340 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 13:11:57.643 +01:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 13:11:57.657 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 13:11:57.667 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 13:11:57.897 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 13:11:57.900 +01:00 [INF] Hosting environment: Development
2026-02-26 13:11:57.904 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 13:11:58.149 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 13:12:20.010 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 13:12:20.179 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 13:12:20.668 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 13:13:19.970 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 13:13:20.091 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 13:13:20.124 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 13:13:20.286 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 13:13:20.315 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 13:13:20.377 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 13:13:21.062 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:13:21.181 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = -1) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateModification] = @p0, [Donnees] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2026-02-26 13:13:21.210 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 13:13:21.260 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 13:13:21.326 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 13:14:10.345 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:14:10.372 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:14:15.378 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:14:15.393 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:29:13.063 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 13:29:15.440 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 13:29:15.445 +01:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 13:29:15.446 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 13:29:15.582 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 13:29:15.586 +01:00 [INF] Hosting environment: Development
2026-02-26 13:29:15.589 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 13:29:15.778 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 13:29:38.630 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 13:29:38.816 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 13:29:39.763 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 13:30:38.066 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 13:30:38.184 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 13:30:38.215 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 13:30:38.380 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 13:30:38.410 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 13:30:38.467 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 13:30:39.152 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:30:39.266 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = -1) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateModification] = @p0, [Donnees] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2026-02-26 13:30:39.284 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 13:30:39.320 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 13:30:39.377 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 13:31:08.765 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:31:08.783 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:31:13.243 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:31:13.253 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:47:33.600 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 13:47:35.990 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 13:47:35.990 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 13:47:36.004 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 13:47:36.188 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 13:47:36.195 +01:00 [INF] Hosting environment: Development
2026-02-26 13:47:36.202 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 13:47:36.516 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 13:47:55.827 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 13:47:56.043 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 13:47:56.971 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 13:48:57.740 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 13:48:57.844 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 13:48:57.876 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 13:48:58.009 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 13:48:58.031 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 13:48:58.077 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 13:48:58.611 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:48:58.715 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = -1) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateModification] = @p0, [Donnees] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2026-02-26 13:48:58.736 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 13:48:58.774 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 13:48:58.831 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 13:49:25.125 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:49:25.139 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:49:29.684 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:49:29.689 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:54:10.402 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 13:54:12.918 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 13:54:12.919 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 13:54:12.930 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 13:54:13.085 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 13:54:13.089 +01:00 [INF] Hosting environment: Development
2026-02-26 13:54:13.093 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 13:54:13.367 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 13:54:34.814 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 13:54:34.974 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 13:54:35.855 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 13:55:51.121 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 13:55:51.230 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 13:55:51.263 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 13:55:51.430 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 13:55:51.454 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 13:55:51.516 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 13:55:52.208 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:55:52.346 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = -1) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateModification] = @p0, [Donnees] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2026-02-26 13:55:52.365 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 13:55:52.410 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 13:55:52.481 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 13:56:22.291 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:56:22.307 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 13:56:27.725 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 13:56:27.730 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 15:37:19.103 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 15:37:26.428 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 15:37:26.434 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 15:37:26.449 +01:00 [INF] Executed DbCommand (134ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 15:37:26.593 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 15:37:26.597 +01:00 [INF] Hosting environment: Development
2026-02-26 15:37:26.600 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 15:37:26.893 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 15:38:31.917 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 15:38:32.158 +01:00 [INF] Executed DbCommand (121ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 15:38:32.917 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 15:39:33.063 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 15:39:33.186 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 15:39:33.215 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 15:39:33.374 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p11='?' (DbType = Guid), @p10='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [dossiers] SET [DateModification] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2026-02-26 15:39:33.398 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__request_DossierId_0
2026-02-26 15:39:33.456 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__devisId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [devis] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
LEFT JOIN [demandes] AS [d1] ON [d].[IdDemande] = [d1].[Id]
WHERE [d].[Id] = @__devisId_0
2026-02-26 15:39:34.456 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__devis_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devis_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 15:39:34.577 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (Size = -1) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [documentsDossiers] SET [DateModification] = @p0, [Donnees] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2026-02-26 15:39:34.599 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 15:39:34.643 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 15:39:34.719 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 15:39:54.135 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 15:39:54.150 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 15:39:58.716 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DocumentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[Id] = @__request_DocumentId_0
2026-02-26 15:39:58.725 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__devisRecord_IdDossier_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateModification], [d].[Donnees], [d].[Extension], [d].[FilePath], [d].[IdDossier], [d].[Libelle], [d].[Nom], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [documentsDossiers] AS [d]
WHERE [d].[IdDossier] = @__devisRecord_IdDossier_0 AND [d].[Type] = CAST(2 AS tinyint)
2026-02-26 16:31:02.280 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 16:31:05.915 +01:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 16:31:05.959 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 16:31:05.974 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 16:31:06.167 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 16:31:06.171 +01:00 [INF] Hosting environment: Development
2026-02-26 16:31:06.176 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 16:31:06.447 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 16:33:04.450 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 16:33:04.638 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 16:33:05.140 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 16:34:17.781 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
2026-02-26 16:34:17.893 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2026-02-26 16:34:18.133 +01:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [s].[Id], [s].[Code], [s].[Libelle], [d1].[Id], [s0].[Id], [c0].[Id], [b].[Id], [d2].[Id], [d2].[DateCreation], [d2].[DateModification], [d2].[Donnees], [d2].[Extension], [d2].[FilePath], [d2].[IdDossier], [d2].[Libelle], [d2].[Nom], [d2].[Type], [d2].[UtilisateurCreation], [d2].[UtilisateurModification], [d3].[Id], [d3].[Date], [d3].[DateCreation], [d3].[DateModification], [d3].[IdDemande], [d3].[IdDossier], [d3].[MontantControle], [d3].[MontantEtude], [d3].[MontantHomologation], [d3].[MontantPenalite], [d3].[MontantTotal], [d3].[PaiementMobileId], [d3].[PaiementOk], [d3].[UtilisateurCreation], [d3].[UtilisateurModification], [d1].[ContactEmail], [d1].[ContactNom], [d1].[ContactTelephone], [d1].[DateCreation], [d1].[DateModification], [d1].[Description], [d1].[EchantillonSoumis], [d1].[Equipement], [d1].[EstHomologable], [d1].[Fabricant], [d1].[IdCategorie], [d1].[IdDossier], [d1].[IdMotifRejet], [d1].[IdProposition], [d1].[IdStatut], [d1].[Marque], [d1].[Modele], [d1].[NumeroDemande], [d1].[PrixUnitaire], [d1].[QuantiteEquipements], [d1].[Remise], [d1].[RequiertEchantillon], [d1].[Type], [d1].[UtilisateurCreation], [d1].[UtilisateurModification], [s0].[Code], [s0].[Libelle], [c0].[BlockSize], [c0].[Code], [c0].[CoutUnitaire], [c0].[DateCreation], [c0].[DateModification], [c0].[EstCalculeParQuantite], [c0].[FormuleHomologation], [c0].[FraisControle], [c0].[FraisEtude], [c0].[FraisHomologation], [c0].[FraisHomologationParLot], [c0].[FraisHomologationQuantiteParLot], [c0].[Libelle], [c0].[ModeCalcul], [c0].[QtyMax], [c0].[QtyMin], [c0].[QuantiteReference], [c0].[ReferenceLoiFinance], [c0].[Remarques], [c0].[TypeCalcul], [c0].[TypeClient], [c0].[TypeEquipement], [c0].[UtilisateurCreation], [c0].[UtilisateurModification], [d4].[Id], [d4].[DateCreation], [d4].[DateModification], [d4].[Donnees], [d4].[Extension], [d4].[FilePath], [d4].[IdDemande], [d4].[Libelle], [d4].[Nom], [d4].[UtilisateurCreation], [d4].[UtilisateurModification], [a].[Id], [a].[DateCreation], [a].[DateDelivrance], [a].[DateExpiration], [a].[DateModification], [a].[Donnees], [a].[Extension], [a].[IdDemande], [a].[NumeroSequentiel], [a].[SignataireId], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a].[VisaReference], [b].[Adresse], [b].[DateCreation], [b].[DateModification], [b].[DemandeId], [b].[Email], [b].[LettreDocumentPath], [b].[Nom], [b].[Telephone], [b].[Type], [b].[UtilisateurCreation], [b].[UtilisateurModification]
FROM (
    SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification]
    FROM [dossiers] AS [d]
    ORDER BY [d].[DateCreation] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [clients] AS [c] ON [d0].[IdClient] = [c].[Id]
INNER JOIN [statuts] AS [s] ON [d0].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d1] ON [d0].[Id] = [d1].[IdDossier]
LEFT JOIN [statuts] AS [s0] ON [d1].[IdStatut] = [s0].[Id]
LEFT JOIN [categoriesEquipements] AS [c0] ON [d1].[IdCategorie] = [c0].[Id]
LEFT JOIN [beneficiaires] AS [b] ON [d1].[Id] = [b].[DemandeId]
LEFT JOIN [documentsDossiers] AS [d2] ON [d0].[Id] = [d2].[IdDossier]
LEFT JOIN [devis] AS [d3] ON [d0].[Id] = [d3].[IdDossier]
LEFT JOIN [documentsDemandes] AS [d4] ON [d1].[Id] = [d4].[IdDemande]
LEFT JOIN [attestations] AS [a] ON [d1].[Id] = [a].[IdDemande]
ORDER BY [d0].[DateCreation] DESC, [d0].[Id], [c].[Id], [s].[Id], [d1].[Id], [s0].[Id], [c0].[Id], [b].[Id], [d2].[Id], [d3].[Id], [d4].[Id]
2026-02-26 16:45:03.772 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Boolean), @p6='?' (Size = 255), @p7='?' (DbType = Currency), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 120), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (Size = 100), @p18='?' (Size = 512), @p19='?' (Size = 20), @p20='?' (Size = 50), @p21='?' (Size = 50), @p22='?' (Size = 60), @p23='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [BlockSize], [Code], [DateCreation], [DateModification], [EstCalculeParQuantite], [FormuleHomologation], [FraisControle], [FraisEtude], [FraisHomologation], [FraisHomologationParLot], [FraisHomologationQuantiteParLot], [Libelle], [ModeCalcul], [QtyMax], [QtyMin], [QuantiteReference], [ReferenceLoiFinance], [Remarques], [TypeCalcul], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
OUTPUT INSERTED.[CoutUnitaire]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2026-02-26 16:45:03.816 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'BackOffice.Infrastructure.Persistence.BackOfficeDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BD_Commun.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'TARIF-2026-R'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a5e86c5a-ef67-458c-b1f5-41b8797f2c5f
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BD_Commun.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'TARIF-2026-R'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a5e86c5a-ef67-458c-b1f5-41b8797f2c5f
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-02-26 16:45:04.219 +01:00 [ERR] Une exception non gérée a été interceptée.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_BD_Commun.dbo.categoriesEquipements', colonne 'Code'. Valeur tronquée : 'TARIF-2026-R'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a5e86c5a-ef67-458c-b1f5-41b8797f2c5f
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BackOffice.Infrastructure.Persistence.BackOfficeDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Infrastructure\Persistence\BackOfficeDbContext.cs:line 125
   at BackOffice.Application.Features.Categories.Commands.CreateCategorie.CreateCategorieCommandHandler.Handle(CreateCategorieCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Application\Features\Categories\Commands\CreateCategorie\CreateCategorieCommandHandler.cs:line 41
   at BackOffice.Api.Controllers.CategoriesController.CreateCategorie(CreateCategorieCommand command) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Controllers\CategoriesController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BackOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2026-02-26 16:45:12.663 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 12), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Boolean), @p6='?' (Size = 255), @p7='?' (DbType = Currency), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 120), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (Size = 100), @p18='?' (Size = 512), @p19='?' (Size = 20), @p20='?' (Size = 50), @p21='?' (Size = 50), @p22='?' (Size = 60), @p23='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [BlockSize], [Code], [DateCreation], [DateModification], [EstCalculeParQuantite], [FormuleHomologation], [FraisControle], [FraisEtude], [FraisHomologation], [FraisHomologationParLot], [FraisHomologationQuantiteParLot], [Libelle], [ModeCalcul], [QtyMax], [QtyMin], [QuantiteReference], [ReferenceLoiFinance], [Remarques], [TypeCalcul], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
OUTPUT INSERTED.[CoutUnitaire]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2026-02-26 16:48:01.064 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 12), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Boolean), @p6='?' (Size = 255), @p7='?' (DbType = Currency), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 120), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (Size = 100), @p18='?' (Size = 512), @p19='?' (Size = 20), @p20='?' (Size = 50), @p21='?' (Size = 50), @p22='?' (Size = 60), @p23='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [BlockSize], [Code], [DateCreation], [DateModification], [EstCalculeParQuantite], [FormuleHomologation], [FraisControle], [FraisEtude], [FraisHomologation], [FraisHomologationParLot], [FraisHomologationQuantiteParLot], [Libelle], [ModeCalcul], [QtyMax], [QtyMin], [QuantiteReference], [ReferenceLoiFinance], [Remarques], [TypeCalcul], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
OUTPUT INSERTED.[CoutUnitaire]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2026-02-26 16:52:11.539 +01:00 [INF] Moteur d'automatisation des délais DAFC et DRSCE démarré.
2026-02-26 16:52:14.596 +01:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification]
FROM [dossiers] AS [d]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[DateEnvoiDevis] IS NOT NULL AND EXISTS (
    SELECT 1
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND ([d0].[PaiementOk] <> CAST(1 AS tinyint) OR [d0].[PaiementOk] IS NULL))
ORDER BY [d].[Id], [c].[Id]
2026-02-26 16:52:14.640 +01:00 [INF] Now listening on: https://localhost:7238
2026-02-26 16:52:14.648 +01:00 [INF] Now listening on: http://localhost:5126
2026-02-26 16:52:14.748 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
WHERE [d].[DateDemandeEchantillon] IS NOT NULL AND [d0].[EchantillonSoumis] = CAST(0 AS bit)
2026-02-26 16:52:14.834 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-26 16:52:14.839 +01:00 [INF] Hosting environment: Development
2026-02-26 16:52:14.843 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-homologation-backends-cds\arpce-homologation-backOffice\Arpce.Homologation.BackOffice\BackOffice.Api
2026-02-26 16:52:33.105 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-02-26 16:52:33.309 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[@__request_Compte_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a0].[Id], [a0].[Code], [a0].[DateCreation], [a0].[DateModification], [a0].[Libelle], [a0].[Remarques], [a0].[UtilisateurCreation], [a0].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a].[Compte] = @__request_Compte_0
2026-02-26 16:52:34.346 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AdminUtilisateurs] SET [DerniereConnexion] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-26 16:53:54.494 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 12), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Boolean), @p6='?' (Size = 255), @p7='?' (DbType = Currency), @p8='?' (DbType = Currency), @p9='?' (DbType = Currency), @p10='?' (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 120), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (Size = 100), @p18='?' (Size = 512), @p19='?' (Size = 20), @p20='?' (Size = 50), @p21='?' (Size = 50), @p22='?' (Size = 60), @p23='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categoriesEquipements] ([Id], [BlockSize], [Code], [DateCreation], [DateModification], [EstCalculeParQuantite], [FormuleHomologation], [FraisControle], [FraisEtude], [FraisHomologation], [FraisHomologationParLot], [FraisHomologationQuantiteParLot], [Libelle], [ModeCalcul], [QtyMax], [QtyMin], [QuantiteReference], [ReferenceLoiFinance], [Remarques], [TypeCalcul], [TypeClient], [TypeEquipement], [UtilisateurCreation], [UtilisateurModification])
OUTPUT INSERTED.[CoutUnitaire]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2026-02-26 17:36:48.371 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_DemandeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[ContactEmail], [d].[ContactNom], [d].[ContactTelephone], [d].[DateCreation], [d].[DateModification], [d].[Description], [d].[EchantillonSoumis], [d].[Equipement], [d].[EstHomologable], [d].[Fabricant], [d].[IdCategorie], [d].[IdDossier], [d].[IdMotifRejet], [d].[IdProposition], [d].[IdStatut], [d].[Marque], [d].[Modele], [d].[NumeroDemande], [d].[PrixUnitaire], [d].[QuantiteEquipements], [d].[Remise], [d].[RequiertEchantillon], [d].[Type], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[DateCreation], [d0].[DateDemandeEchantillon], [d0].[DateEnvoiDevis], [d0].[DateModification], [d0].[DateOuverture], [d0].[IdAgentInstructeur], [d0].[IdClient], [d0].[IdModeReglement], [d0].[IdStatut], [d0].[Libelle], [d0].[Numero], [d0].[PenaliteAppliquee], [d0].[RappelEchantillonEnvoye], [d0].[RappelPaiementEnvoye], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [demandes] AS [d]
INNER JOIN [dossiers] AS [d0] ON [d].[IdDossier] = [d0].[Id]
WHERE [d].[Id] = @__request_DemandeId_0
2026-02-26 17:36:48.545 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CategorieId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [categoriesEquipements] AS [c]
WHERE [c].[Id] = @__request_CategorieId_Value_0
2026-02-26 17:36:48.628 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Int64), @p1='?' (DbType = Guid), @p2='?' (DbType = Currency), @p3='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [demandes] SET [DateModification] = @p0, [IdCategorie] = @p1, [PrixUnitaire] = @p2, [UtilisateurModification] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2026-02-26 17:36:48.649 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 17:36:48.694 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 17:36:48.770 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 17:36:48.835 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (Size = 150), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 1000), @p10='?' (Size = 100), @p11='?' (Size = 20), @p12='?' (Size = 500), @p13='?' (Size = 200), @p14='?' (Size = 50), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [notifications] ([Id], [Canal], [DateCreation], [DateEnvoi], [DateModification], [Destinataire], [EntityId], [IsBroadcast], [IsRead], [Message], [ProfilCode], [StatutEnvoi], [TargetUrl], [Title], [Type], [UserId], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-02-26 17:38:03.057 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification], [c].[Id], [c].[BlockSize], [c].[Code], [c].[CoutUnitaire], [c].[DateCreation], [c].[DateModification], [c].[EstCalculeParQuantite], [c].[FormuleHomologation], [c].[FraisControle], [c].[FraisEtude], [c].[FraisHomologation], [c].[FraisHomologationParLot], [c].[FraisHomologationQuantiteParLot], [c].[Libelle], [c].[ModeCalcul], [c].[QtyMax], [c].[QtyMin], [c].[QuantiteReference], [c].[ReferenceLoiFinance], [c].[Remarques], [c].[TypeCalcul], [c].[TypeClient], [c].[TypeEquipement], [c].[UtilisateurCreation], [c].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [categoriesEquipements] AS [c] ON [d0].[IdCategorie] = [c].[Id]
WHERE [d].[Id] = @__request_DossierId_0
2026-02-26 17:38:03.084 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_CodeStatut_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = @__request_CodeStatut_0
2026-02-26 17:38:03.113 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@___currentUserService_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @___currentUserService_UserId_0
2026-02-26 17:38:03.171 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dossier_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Date], [d].[DateCreation], [d].[DateModification], [d].[IdDemande], [d].[IdDossier], [d].[MontantControle], [d].[MontantEtude], [d].[MontantHomologation], [d].[MontantPenalite], [d].[MontantTotal], [d].[PaiementMobileId], [d].[PaiementOk], [d].[UtilisateurCreation], [d].[UtilisateurModification]
FROM [devis] AS [d]
WHERE [d].[IdDossier] = @__dossier_Id_0
2026-02-26 17:38:03.295 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (Size = 60), @p7='?' (Size = 512), @p8='?' (Size = 60), @p9='?' (Size = 60), @p12='?' (DbType = Guid), @p10='?' (DbType = Int64), @p11='?' (DbType = Currency), @p13='?' (DbType = Guid), @p14='?' (DbType = Int64), @p15='?' (DbType = Int64), @p16='?' (DbType = Int64), @p17='?' (DbType = Guid), @p18='?' (DbType = Guid), @p19='?' (DbType = Currency), @p20='?' (DbType = Currency), @p21='?' (DbType = Currency), @p22='?' (DbType = Currency), @p23='?' (Size = 60), @p24='?' (DbType = Byte), @p25='?' (Size = 60), @p26='?' (Size = 60), @p30='?' (DbType = Guid), @p27='?' (DbType = Int64), @p28='?' (DbType = Guid), @p29='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [commentaires] ([Id], [commentaire], [DateCommentaire], [DateCreation], [DateModification], [IdDossier], [NomInstructeur], [Proposition], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [demandes] SET [DateModification] = @p10, [PrixUnitaire] = @p11
OUTPUT 1
WHERE [Id] = @p12;
INSERT INTO [devis] ([Id], [Date], [DateCreation], [DateModification], [IdDemande], [IdDossier], [MontantControle], [MontantEtude], [MontantHomologation], [MontantTotal], [PaiementMobileId], [PaiementOk], [UtilisateurCreation], [UtilisateurModification])
OUTPUT INSERTED.[MontantPenalite]
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
UPDATE [dossiers] SET [DateModification] = @p27, [IdStatut] = @p28, [UtilisateurModification] = @p29
OUTPUT 1
WHERE [Id] = @p30;
2026-02-26 17:38:03.335 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entityId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[ContactTelephone], [d0].[DateCreation], [d0].[DateModification], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation], [d0].[UtilisateurModification]
FROM [dossiers] AS [d]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[Id] = @__entityId_0
2026-02-26 17:38:03.353 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (Size = 150), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 1000), @p10='?' (Size = 100), @p11='?' (Size = 20), @p12='?' (Size = 500), @p13='?' (Size = 200), @p14='?' (Size = 50), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [notifications] ([Id], [Canal], [DateCreation], [DateEnvoi], [DateModification], [Destinataire], [EntityId], [IsBroadcast], [IsRead], [Message], [ProfilCode], [StatutEnvoi], [TargetUrl], [Title], [Type], [UserId], [UtilisateurCreation], [UtilisateurModification])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-02-26 17:38:03.380 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__mapping_Item1_0='?' (Size = 12)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Email], [a].[Compte], [a].[Nom], [a].[Prenoms]
FROM [AdminUtilisateurs] AS [a]
LEFT JOIN [adminProfils] AS [a0] ON [a].[IdProfil] = [a0].[Id]
WHERE [a0].[Id] IS NOT NULL AND [a0].[Code] = @__mapping_Item1_0 AND [a].[Desactive] = CAST(0 AS bit)
2026-02-26 17:38:03.398 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__eventTypeCode_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Code], [a].[Libelle]
FROM [adminEvenementsTypes] AS [a]
WHERE [a].[Code] = @__eventTypeCode_0
2026-02-26 17:38:03.407 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AdminProfilsId], [a].[ChangementMotPasse], [a].[Compte], [a].[DateCreation], [a].[DateModification], [a].[DerniereConnexion], [a].[Desactive], [a].[Email], [a].[Fonction], [a].[IdProfil], [a].[IdUtilisateurType], [a].[MotPasse], [a].[Nom], [a].[Prenoms], [a].[Remarques], [a].[UtilisateurCreation], [a].[UtilisateurModification]
FROM [AdminUtilisateurs] AS [a]
WHERE [a].[Id] = @__p_0
2026-02-26 17:38:03.424 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 120), @p2='?' (Size = 120), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (Size = 255), @p8='?' (Size = 120), @p9='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [adminJournal] ([Id], [AdresseIP], [Application], [DateEvenement], [DossierId], [IdDossier], [IdEvenementType], [Libelle], [Page], [Utilisateur])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-02-26 17:38:39.275 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2026-02-26 17:38:39.507 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s1].[Id], [s1].[DateCreation], [s1].[DateDemandeEchantillon], [s1].[DateEnvoiDevis], [s1].[DateModification], [s1].[DateOuverture], [s1].[IdAgentInstructeur], [s1].[IdClient], [s1].[IdModeReglement], [s1].[IdStatut], [s1].[Libelle], [s1].[Numero], [s1].[PenaliteAppliquee], [s1].[RappelEchantillonEnvoye], [s1].[RappelPaiementEnvoye], [s1].[UtilisateurCreation], [s1].[UtilisateurModification], [s1].[Id0], [s1].[Adresse], [s1].[Bp], [s1].[ChangementMotPasse], [s1].[Code], [s1].[ContactFonction], [s1].[ContactNom], [s1].[ContactTelephone], [s1].[DateCreation0], [s1].[DateModification0], [s1].[Desactive], [s1].[Email], [s1].[IsVerified], [s1].[MotPasse], [s1].[NiveauValidation], [s1].[Pays], [s1].[RaisonSociale], [s1].[RegistreCommerce], [s1].[Remarques], [s1].[TypeClient], [s1].[UtilisateurCreation0], [s1].[UtilisateurModification0], [s1].[VerificationCode], [s1].[VerificationTokenExpiry], [s1].[Ville], [s1].[Id1], [s1].[Code0], [s1].[Libelle0], [s1].[Id2], [s1].[Code1], [s1].[DateCreation1], [s1].[DateModification1], [s1].[Libelle1], [s1].[MobileBanking], [s1].[Remarques0], [s1].[UtilisateurCreation1], [s1].[UtilisateurModification1], [s1].[Id3], [s1].[Id4], [s1].[Id5], [s1].[Id6], [s1].[Id7], [s1].[Id8], [c1].[Id], [c1].[commentaire], [c1].[DateCommentaire], [c1].[DateCreation], [c1].[DateModification], [c1].[IdDossier], [c1].[NomInstructeur], [c1].[Proposition], [c1].[UtilisateurCreation], [c1].[UtilisateurModification], [d1].[Id], [d1].[Date], [d1].[DateCreation], [d1].[DateModification], [d1].[IdDemande], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[MontantPenalite], [d1].[MontantTotal], [d1].[PaiementMobileId], [d1].[PaiementOk], [d1].[UtilisateurCreation], [d1].[UtilisateurModification], [d2].[Id], [d2].[DateCreation], [d2].[DateModification], [d2].[Donnees], [d2].[Extension], [d2].[FilePath], [d2].[IdDossier], [d2].[Libelle], [d2].[Nom], [d2].[Type], [d2].[UtilisateurCreation], [d2].[UtilisateurModification], [s1].[ContactEmail], [s1].[ContactNom0], [s1].[ContactTelephone0], [s1].[DateCreation2], [s1].[DateModification2], [s1].[Description], [s1].[EchantillonSoumis], [s1].[Equipement], [s1].[EstHomologable], [s1].[Fabricant], [s1].[IdCategorie], [s1].[IdDossier], [s1].[IdMotifRejet], [s1].[IdProposition], [s1].[IdStatut0], [s1].[Marque], [s1].[Modele], [s1].[NumeroDemande], [s1].[PrixUnitaire], [s1].[QuantiteEquipements], [s1].[Remise], [s1].[RequiertEchantillon], [s1].[Type], [s1].[UtilisateurCreation2], [s1].[UtilisateurModification2], [s1].[Code2], [s1].[Libelle2], [d3].[Id], [d3].[DateCreation], [d3].[DateModification], [d3].[Donnees], [d3].[Extension], [d3].[FilePath], [d3].[IdDemande], [d3].[Libelle], [d3].[Nom], [d3].[UtilisateurCreation], [d3].[UtilisateurModification], [s1].[BlockSize], [s1].[Code3], [s1].[CoutUnitaire], [s1].[DateCreation3], [s1].[DateModification3], [s1].[EstCalculeParQuantite], [s1].[FormuleHomologation], [s1].[FraisControle], [s1].[FraisEtude], [s1].[FraisHomologation], [s1].[FraisHomologationParLot], [s1].[FraisHomologationQuantiteParLot], [s1].[Libelle3], [s1].[ModeCalcul], [s1].[QtyMax], [s1].[QtyMin], [s1].[QuantiteReference], [s1].[ReferenceLoiFinance], [s1].[Remarques1], [s1].[TypeCalcul], [s1].[TypeClient0], [s1].[TypeEquipement], [s1].[UtilisateurCreation3], [s1].[UtilisateurModification3], [s1].[Code4], [s1].[DateCreation4], [s1].[DateModification4], [s1].[Libelle4], [s1].[Remarques2], [s1].[UtilisateurCreation4], [s1].[UtilisateurModification4], [s1].[Code5], [s1].[DateCreation5], [s1].[DateModification5], [s1].[Libelle5], [s1].[UtilisateurCreation5], [s1].[UtilisateurModification5], [a].[Id], [a].[DateCreation], [a].[DateDelivrance], [a].[DateExpiration], [a].[DateModification], [a].[Donnees], [a].[Extension], [a].[IdDemande], [a].[NumeroSequentiel], [a].[SignataireId], [a].[UtilisateurCreation], [a].[UtilisateurModification], [a].[VisaReference], [s1].[Adresse0], [s1].[DateCreation6], [s1].[DateModification6], [s1].[DemandeId], [s1].[Email0], [s1].[LettreDocumentPath], [s1].[Nom], [s1].[Telephone], [s1].[Type0], [s1].[UtilisateurCreation6], [s1].[UtilisateurModification6]
FROM (
    SELECT TOP(1) [d].[Id], [d].[DateCreation], [d].[DateDemandeEchantillon], [d].[DateEnvoiDevis], [d].[DateModification], [d].[DateOuverture], [d].[IdAgentInstructeur], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [d].[PenaliteAppliquee], [d].[RappelEchantillonEnvoye], [d].[RappelPaiementEnvoye], [d].[UtilisateurCreation], [d].[UtilisateurModification], [c].[Id] AS [Id0], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation] AS [DateCreation0], [c].[DateModification] AS [DateModification0], [c].[Desactive], [c].[Email], [c].[IsVerified], [c].[MotPasse], [c].[NiveauValidation], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[TypeClient], [c].[UtilisateurCreation] AS [UtilisateurCreation0], [c].[UtilisateurModification] AS [UtilisateurModification0], [c].[VerificationCode], [c].[VerificationTokenExpiry], [c].[Ville], [s].[Id] AS [Id1], [s].[Code] AS [Code0], [s].[Libelle] AS [Libelle0], [m].[Id] AS [Id2], [m].[Code] AS [Code1], [m].[DateCreation] AS [DateCreation1], [m].[DateModification] AS [DateModification1], [m].[Libelle] AS [Libelle1], [m].[MobileBanking], [m].[Remarques] AS [Remarques0], [m].[UtilisateurCreation] AS [UtilisateurCreation1], [m].[UtilisateurModification] AS [UtilisateurModification1], [d0].[Id] AS [Id3], [d0].[ContactEmail], [d0].[ContactNom] AS [ContactNom0], [d0].[ContactTelephone] AS [ContactTelephone0], [d0].[DateCreation] AS [DateCreation2], [d0].[DateModification] AS [DateModification2], [d0].[Description], [d0].[EchantillonSoumis], [d0].[Equipement], [d0].[EstHomologable], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[IdStatut] AS [IdStatut0], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[PrixUnitaire], [d0].[QuantiteEquipements], [d0].[Remise], [d0].[RequiertEchantillon], [d0].[Type], [d0].[UtilisateurCreation] AS [UtilisateurCreation2], [d0].[UtilisateurModification] AS [UtilisateurModification2], [s0].[Id] AS [Id4], [s0].[Code] AS [Code2], [s0].[Libelle] AS [Libelle2], [c0].[Id] AS [Id5], [c0].[BlockSize], [c0].[Code] AS [Code3], [c0].[CoutUnitaire], [c0].[DateCreation] AS [DateCreation3], [c0].[DateModification] AS [DateModification3], [c0].[EstCalculeParQuantite], [c0].[FormuleHomologation], [c0].[FraisControle], [c0].[FraisEtude], [c0].[FraisHomologation], [c0].[FraisHomologationParLot], [c0].[FraisHomologationQuantiteParLot], [c0].[Libelle] AS [Libelle3], [c0].[ModeCalcul], [c0].[QtyMax], [c0].[QtyMin], [c0].[QuantiteReference], [c0].[ReferenceLoiFinance], [c0].[Remarques] AS [Remarques1], [c0].[TypeCalcul], [c0].[TypeClient] AS [TypeClient0], [c0].[TypeEquipement], [c0].[UtilisateurCreation] AS [UtilisateurCreation3], [c0].[UtilisateurModification] AS [UtilisateurModification3], [m0].[Id] AS [Id6], [m0].[Code] AS [Code4], [m0].[DateCreation] AS [DateCreation4], [m0].[DateModification] AS [DateModification4], [m0].[Libelle] AS [Libelle4], [m0].[Remarques] AS [Remarques2], [m0].[UtilisateurCreation] AS [UtilisateurCreation4], [m0].[UtilisateurModification] AS [UtilisateurModification4], [p].[Id] AS [Id7], [p].[Code] AS [Code5], [p].[DateCreation] AS [DateCreation5], [p].[DateModification] AS [DateModification5], [p].[Libelle] AS [Libelle5], [p].[UtilisateurCreation] AS [UtilisateurCreation5], [p].[UtilisateurModification] AS [UtilisateurModification5], [b].[Id] AS [Id8], [b].[Adresse] AS [Adresse0], [b].[DateCreation] AS [DateCreation6], [b].[DateModification] AS [DateModification6], [b].[DemandeId], [b].[Email] AS [Email0], [b].[LettreDocumentPath], [b].[Nom], [b].[Telephone], [b].[Type] AS [Type0], [b].[UtilisateurCreation] AS [UtilisateurCreation6], [b].[UtilisateurModification] AS [UtilisateurModification6]
    FROM [dossiers] AS [d]
    INNER JOIN [clients] AS [c] ON [d].[IdClient] = [c].[Id]
    INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
    LEFT JOIN [modesReglements] AS [m] ON [d].[IdModeReglement] = [m].[Id]
    LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
    LEFT JOIN [statuts] AS [s0] ON [d0].[IdStatut] = [s0].[Id]
    LEFT JOIN [categoriesEquipements] AS [c0] ON [d0].[IdCategorie] = [c0].[Id]
    LEFT JOIN [motifsRejets] AS [m0] ON [d0].[IdMotifRejet] = [m0].[Id]
    LEFT JOIN [propositions] AS [p] ON [d0].[IdProposition] = [p].[Id]
    LEFT JOIN [beneficiaires] AS [b] ON [d0].[Id] = [b].[DemandeId]
    WHERE [d].[Id] = @__request_DossierId_0
) AS [s1]
LEFT JOIN [commentaires] AS [c1] ON [s1].[Id] = [c1].[IdDossier]
LEFT JOIN [devis] AS [d1] ON [s1].[Id] = [d1].[IdDossier]
LEFT JOIN [documentsDossiers] AS [d2] ON [s1].[Id] = [d2].[IdDossier]
LEFT JOIN [documentsDemandes] AS [d3] ON [s1].[Id3] = [d3].[IdDemande]
LEFT JOIN [attestations] AS [a] ON [s1].[Id3] = [a].[IdDemande]
ORDER BY [s1].[Id], [s1].[Id0], [s1].[Id1], [s1].[Id2], [s1].[Id3], [s1].[Id4], [s1].[Id5], [s1].[Id6], [s1].[Id7], [s1].[Id8], [c1].[Id], [d1].[Id], [d2].[Id], [d3].[Id]
