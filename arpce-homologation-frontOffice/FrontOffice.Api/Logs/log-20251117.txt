2025-11-17 01:09:07.929 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 01:09:07.985 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 01:09:08.067 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 01:09:08.071 +01:00 [INF] Hosting environment: Development
2025-11-17 01:09:08.076 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 01:09:16.714 +01:00 [INF] HTTP GET /index.html responded 200 in 213.8382 ms
2025-11-17 01:09:16.823 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 304 in 38.9866 ms
2025-11-17 01:09:17.243 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 71.4203 ms
2025-11-17 01:29:23.346 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 01:29:23.409 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 01:29:23.531 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 01:29:23.537 +01:00 [INF] Hosting environment: Development
2025-11-17 01:29:23.542 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 01:31:55.964 +01:00 [INF] HTTP GET /index.html responded 200 in 416.4495 ms
2025-11-17 01:31:56.690 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 59.4300 ms
2025-11-17 01:36:13.060 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Program.cs:line 126
2025-11-17 01:36:45.242 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Program.cs:line 126
2025-11-17 01:37:55.660 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 01:37:55.732 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 01:37:55.887 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 01:37:55.923 +01:00 [INF] Hosting environment: Development
2025-11-17 01:37:55.931 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 01:38:16.983 +01:00 [INF] HTTP GET /index.html responded 200 in 195.8397 ms
2025-11-17 01:38:17.646 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 71.1774 ms
2025-11-17 01:41:48.820 +01:00 [INF] Executed DbCommand (192ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [clients] AS [c]
        WHERE [c].[Email] = @__request_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 01:41:50.565 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (Size = 60), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 30), @p5='?' (Size = 60), @p6='?' (Size = 60), @p7='?' (Size = 30), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 60), @p12='?' (Size = 100), @p13='?' (Size = 60), @p14='?' (Size = 120), @p15='?' (Size = 60), @p16='?' (Size = 512), @p17='?' (Size = 60), @p18='?' (Size = 60), @p19='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [clients] ([Id], [Adresse], [Bp], [ChangementMotPasse], [Code], [ContactFonction], [ContactNom], [ContactTelephone], [DateCreation], [DateModification], [Desactive], [Email], [MotPasse], [Pays], [RaisonSociale], [RegistreCommerce], [Remarques], [UtilisateurCreation], [UtilisateurModification], [Ville])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-11-17 01:41:50.731 +01:00 [INF] HTTP POST /api/auth/register responded 200 in 11868.0887 ms
2025-11-17 01:43:26.202 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 01:43:27.124 +01:00 [ERR] HTTP POST /api/auth/login responded 500 in 1083.8193 ms
System.UnauthorizedAccessException: Email ou mot de passe invalide.
   at FrontOffice.Application.Features.Authentication.Queries.Login.LoginClientQueryHandler.Handle(LoginClientQuery request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Application\Features\Authentication\Queries\Login\LoginClientQueryHandler.cs:line 64
   at FrontOffice.Api.Controllers.AuthenticationController.Login(LoginClientQuery query) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Controllers\AuthenticationController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-17 01:51:22.298 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Program.cs:line 126
2025-11-17 01:51:32.832 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Program.cs:line 126
2025-11-17 01:51:50.038 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 01:51:50.103 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 01:51:50.245 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 01:51:50.251 +01:00 [INF] Hosting environment: Development
2025-11-17 01:51:50.255 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 01:52:59.552 +01:00 [INF] HTTP GET /index.html responded 200 in 353.1760 ms
2025-11-17 01:53:00.470 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 89.1966 ms
2025-11-17 01:53:24.309 +01:00 [INF] Executed DbCommand (118ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [clients] AS [c]
        WHERE [c].[Email] = @__request_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 01:53:25.828 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (Size = 60), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 30), @p5='?' (Size = 60), @p6='?' (Size = 60), @p7='?' (Size = 30), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 60), @p12='?' (Size = 100), @p13='?' (Size = 60), @p14='?' (Size = 120), @p15='?' (Size = 60), @p16='?' (Size = 512), @p17='?' (Size = 60), @p18='?' (Size = 60), @p19='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [clients] ([Id], [Adresse], [Bp], [ChangementMotPasse], [Code], [ContactFonction], [ContactNom], [ContactTelephone], [DateCreation], [DateModification], [Desactive], [Email], [MotPasse], [Pays], [RaisonSociale], [RegistreCommerce], [Remarques], [UtilisateurCreation], [UtilisateurModification], [Ville])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-11-17 01:53:25.951 +01:00 [INF] HTTP POST /api/auth/register responded 200 in 7021.1437 ms
2025-11-17 01:54:16.030 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 01:54:16.846 +01:00 [INF] HTTP POST /api/auth/login responded 200 in 988.5046 ms
2025-11-17 01:55:27.518 +01:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 20.3954 ms
2025-11-17 01:57:11.450 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 200 in 130.6648 ms
2025-11-17 01:57:19.549 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 01:57:19.707 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 01:57:19.856 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 01:57:19.863 +01:00 [INF] Hosting environment: Development
2025-11-17 01:57:19.877 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 01:57:27.194 +01:00 [INF] HTTP GET /index.html responded 200 in 171.8147 ms
2025-11-17 01:57:27.748 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 85.2320 ms
2025-11-17 01:57:39.152 +01:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 114.5966 ms
2025-11-17 01:58:00.090 +01:00 [INF] HTTP GET /index.html responded 200 in 47.7981 ms
2025-11-17 01:58:00.189 +01:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 2.9063 ms
2025-11-17 01:58:00.322 +01:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 101.4172 ms
2025-11-17 01:58:00.303 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 200 in 99.0365 ms
2025-11-17 01:58:00.314 +01:00 [INF] HTTP GET /swagger-ui.css responded 200 in 107.1114 ms
2025-11-17 01:58:00.415 +01:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 193.4464 ms
2025-11-17 01:58:00.991 +01:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.5017 ms
2025-11-17 01:58:01.059 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 68.1387 ms
2025-11-17 01:58:56.281 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 200 in 100.2123 ms
2025-11-17 01:59:06.188 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 01:59:06.344 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 01:59:06.821 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 01:59:06.826 +01:00 [INF] Hosting environment: Development
2025-11-17 01:59:06.832 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 01:59:10.688 +01:00 [INF] HTTP GET /index.html responded 200 in 214.5394 ms
2025-11-17 01:59:10.945 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 200 in 176.4736 ms
2025-11-17 01:59:10.985 +01:00 [INF] HTTP GET /swagger-ui.css responded 200 in 270.3672 ms
2025-11-17 01:59:10.991 +01:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 216.9170 ms
2025-11-17 01:59:11.053 +01:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 284.5694 ms
2025-11-17 01:59:11.065 +01:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 354.7703 ms
2025-11-17 01:59:11.556 +01:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 2.3548 ms
2025-11-17 01:59:11.715 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 168.2751 ms
2025-11-17 01:59:42.944 +01:00 [INF] Executed DbCommand (216ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 01:59:45.368 +01:00 [INF] HTTP POST /api/auth/login responded 200 in 8039.4139 ms
2025-11-17 02:02:11.004 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 304 in 9.7385 ms
2025-11-17 02:02:11.036 +01:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 3.6189 ms
2025-11-17 02:03:42.699 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__request_Libelle_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dossiers] AS [d]
        WHERE [d].[Libelle] = @__request_Libelle_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 02:03:42.851 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = N'NouvelleDemande'
2025-11-17 02:03:42.927 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Code], [m].[DateCreation], [m].[DateModification], [m].[Libelle], [m].[MobileBanking], [m].[Remarques], [m].[UtilisateurCreation], [m].[UtilisateurModification]
FROM [modesReglements] AS [m]
WHERE [m].[Code] = N'Virement'
2025-11-17 02:03:43.679 +01:00 [ERR] Failed executing DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Size = 120), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Size = 8000) (DbType = Binary), @p9='?' (Size = 12), @p10='?' (Size = 512), @p11='?' (DbType = Guid), @p12='?' (Size = 60), @p13='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dossiers] ([Id], [DateOuverture], [IdClient], [IdModeReglement], [IdStatut], [Libelle], [Numero])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [documentsDossiers] ([Id], [Donnees], [Extension], [FilePath], [IdDossier], [Nom], [Type])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-11-17 02:03:43.851 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'FrontOffice.Infrastructure.Persistence.FrontOfficeDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_FrontOffice.dbo.dossiers', colonne 'Numero'. Valeur tronquée : 'HOM-2025-111'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_documentsDossiers_dossiers_IdDossier". Le conflit s'est produit dans la base de données "ArpceHomologation_FrontOffice", table "dbo.dossiers", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44886dd2-d14a-4552-8a20-adef1649c141
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_FrontOffice.dbo.dossiers', colonne 'Numero'. Valeur tronquée : 'HOM-2025-111'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_documentsDossiers_dossiers_IdDossier". Le conflit s'est produit dans la base de données "ArpceHomologation_FrontOffice", table "dbo.dossiers", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44886dd2-d14a-4552-8a20-adef1649c141
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-17 02:03:44.496 +01:00 [ERR] HTTP POST /api/demandes/creation responded 500 in 2430.5540 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_FrontOffice.dbo.dossiers', colonne 'Numero'. Valeur tronquée : 'HOM-2025-111'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_documentsDossiers_dossiers_IdDossier". Le conflit s'est produit dans la base de données "ArpceHomologation_FrontOffice", table "dbo.dossiers", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44886dd2-d14a-4552-8a20-adef1649c141
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FrontOffice.Infrastructure.Persistence.FrontOfficeDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Infrastructure\Persistence\FrontOfficeDbContext.cs:line 78
   at FrontOffice.Application.Features.Demandes.Commands.CreateDossier.CreateDossierCommandHandler.Handle(CreateDossierCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Application\Features\Demandes\Commands\CreateDossier\CreateDossierCommandHandler.cs:line 127
   at FrontOffice.Api.Controllers.DemandesController.CreateDossier(CreateDossierCommand command) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Controllers\DemandesController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-17 02:03:44.936 +01:00 [ERR] An unhandled exception has occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Les données de chaîne ou binaires seraient tronquées dans la table 'ArpceHomologation_FrontOffice.dbo.dossiers', colonne 'Numero'. Valeur tronquée : 'HOM-2025-111'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_documentsDossiers_dossiers_IdDossier". Le conflit s'est produit dans la base de données "ArpceHomologation_FrontOffice", table "dbo.dossiers", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44886dd2-d14a-4552-8a20-adef1649c141
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FrontOffice.Infrastructure.Persistence.FrontOfficeDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Infrastructure\Persistence\FrontOfficeDbContext.cs:line 78
   at FrontOffice.Application.Features.Demandes.Commands.CreateDossier.CreateDossierCommandHandler.Handle(CreateDossierCommand request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Application\Features\Demandes\Commands\CreateDossier\CreateDossierCommandHandler.cs:line 127
   at FrontOffice.Api.Controllers.DemandesController.CreateDossier(CreateDossierCommand command) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Controllers\DemandesController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at FrontOffice.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Middleware\ErrorHandlingMiddleware.cs:line 21
2025-11-17 02:46:35.860 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Program.cs:line 126
2025-11-17 02:47:27.406 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Program.cs:line 126
2025-11-17 02:47:46.243 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 02:47:46.305 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 02:47:46.423 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 02:47:46.428 +01:00 [INF] Hosting environment: Development
2025-11-17 02:47:46.432 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 02:47:53.392 +01:00 [INF] HTTP GET /index.html responded 200 in 177.1694 ms
2025-11-17 02:47:53.549 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 200 in 99.2904 ms
2025-11-17 02:47:53.932 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 68.9484 ms
2025-11-17 02:49:10.785 +01:00 [INF] Executed DbCommand (235ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [clients] AS [c]
        WHERE [c].[Email] = @__request_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 02:49:12.678 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (Size = 60), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 30), @p5='?' (Size = 60), @p6='?' (Size = 60), @p7='?' (Size = 30), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 60), @p12='?' (Size = 100), @p13='?' (Size = 60), @p14='?' (Size = 120), @p15='?' (Size = 60), @p16='?' (Size = 512), @p17='?' (Size = 60), @p18='?' (Size = 60), @p19='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [clients] ([Id], [Adresse], [Bp], [ChangementMotPasse], [Code], [ContactFonction], [ContactNom], [ContactTelephone], [DateCreation], [DateModification], [Desactive], [Email], [MotPasse], [Pays], [RaisonSociale], [RegistreCommerce], [Remarques], [UtilisateurCreation], [UtilisateurModification], [Ville])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-11-17 02:49:12.989 +01:00 [INF] HTTP POST /api/auth/register responded 200 in 11316.2068 ms
2025-11-17 02:49:47.081 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 02:49:48.101 +01:00 [ERR] HTTP POST /api/auth/login responded 500 in 1250.1813 ms
System.UnauthorizedAccessException: Email ou mot de passe invalide.
   at FrontOffice.Application.Features.Authentication.Queries.Login.LoginClientQueryHandler.Handle(LoginClientQuery request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Application\Features\Authentication\Queries\Login\LoginClientQueryHandler.cs:line 64
   at FrontOffice.Api.Controllers.AuthenticationController.Login(LoginClientQuery query) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Controllers\AuthenticationController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-17 02:50:32.037 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 02:50:32.542 +01:00 [INF] HTTP POST /api/auth/login responded 200 in 662.7537 ms
2025-11-17 02:52:58.653 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_Libelle_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dossiers] AS [d]
        WHERE [d].[Libelle] = @__request_Libelle_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 02:52:58.743 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = N'NouvelleDemande'
2025-11-17 02:52:58.794 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Code], [m].[DateCreation], [m].[DateModification], [m].[Libelle], [m].[MobileBanking], [m].[Remarques], [m].[UtilisateurCreation], [m].[UtilisateurModification]
FROM [modesReglements] AS [m]
WHERE [m].[Code] = N'Virement'
2025-11-17 02:52:59.124 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Size = 120), @p6='?' (Size = 30), @p7='?' (DbType = Guid), @p8='?' (Size = 8000) (DbType = Binary), @p9='?' (Size = 12), @p10='?' (Size = 512), @p11='?' (DbType = Guid), @p12='?' (Size = 60), @p13='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dossiers] ([Id], [DateOuverture], [IdClient], [IdModeReglement], [IdStatut], [Libelle], [Numero])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [documentsDossiers] ([Id], [Donnees], [Extension], [FilePath], [IdDossier], [Nom], [Type])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-11-17 02:52:59.239 +01:00 [INF] HTTP POST /api/demandes/creation responded 201 in 958.6675 ms
2025-11-17 02:57:26.858 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_IdDossier_0='?' (DbType = Guid), @__userId_Value_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero]
FROM [dossiers] AS [d]
WHERE [d].[Id] = @__request_IdDossier_0 AND [d].[IdClient] = @__userId_Value_1
2025-11-17 02:57:27.003 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 60), @p2='?' (Size = 60), @p3='?' (Size = 512), @p4='?' (Size = 120), @p5='?' (Size = 120), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 120), @p11='?' (Size = 120), @p12='?' (Size = 12), @p13='?' (DbType = Int32), @p14='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [demandes] ([Id], [ContactEmail], [ContactNom], [Description], [Equipement], [Fabricant], [IdCategorie], [IdDossier], [IdMotifRejet], [IdProposition], [Marque], [Modele], [NumeroDemande], [QuantiteEquipements], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-17 02:57:27.064 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 12), @p3='?' (Size = 512), @p4='?' (DbType = Guid), @p5='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [documentsDemandes] ([Id], [Donnees], [Extension], [FilePath], [IdDemande], [Nom])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-11-17 02:57:27.084 +01:00 [INF] HTTP POST /api/demandes/equipements responded 200 in 310.7773 ms
2025-11-17 03:14:36.273 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdClient], [d].[IdStatut], [d].[IdModeReglement], [d].[DateOuverture], [d].[Numero], [d].[Libelle], CAST(1 AS bit), [s].[Id], [s].[Code], [s].[Libelle], [d0].[Id], [d0].[IdDossier], [d0].[NumeroDemande], [d0].[Equipement], [d0].[Modele], [d0].[Marque]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[IdClient] = @__userId_Value_0
ORDER BY [d].[Id], [s].[Id]
2025-11-17 03:14:36.377 +01:00 [INF] HTTP GET /api/demandes/recents responded 200 in 713.7831 ms
2025-11-17 03:15:15.367 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-17 03:15:15.446 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[Description], [d0].[Equipement], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[QuantiteEquipements], [d0].[Type], [s].[Code], [s].[Libelle], [d1].[Id], [d1].[Date], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[PaiementMobileId], [d1].[PaiementOk]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[IdClient] = @__userId_Value_0
ORDER BY [d].[Id], [s].[Id], [d0].[Id]
2025-11-17 03:15:15.510 +01:00 [INF] HTTP GET /api/demandes/apercu responded 200 in 287.0478 ms
2025-11-17 03:21:31.126 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ClientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Id] = @__request_ClientId_0
2025-11-17 03:21:31.151 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Size = 60), @p1='?' (Size = 60), @p2='?' (Size = 30), @p3='?' (DbType = DateTime), @p4='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [clients] SET [ContactFonction] = @p0, [ContactNom] = @p1, [ContactTelephone] = @p2, [DateModification] = @p3, [UtilisateurModification] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-11-17 03:21:31.174 +01:00 [INF] HTTP PATCH /api/clients/25ee5b68-af6c-42e3-b7df-7ed9e8e2553d/contact responded 200 in 95.9904 ms
2025-11-17 03:43:18.695 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 03:43:18.737 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 03:43:19.110 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 03:43:19.114 +01:00 [INF] Hosting environment: Development
2025-11-17 03:43:19.117 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 03:43:33.615 +01:00 [INF] HTTP GET /index.html responded 200 in 232.3060 ms
2025-11-17 03:43:33.699 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 304 in 52.1550 ms
2025-11-17 03:43:34.213 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 83.9016 ms
2025-11-17 03:43:58.893 +01:00 [INF] HTTP GET /api/demandes/recents responded 401 in 281.6302 ms
2025-11-17 03:44:54.540 +01:00 [INF] Executed DbCommand (132ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdClient], [d].[IdStatut], [d].[IdModeReglement], [d].[DateOuverture], [d].[Numero], [d].[Libelle], CAST(1 AS bit), [s].[Id], [s].[Code], [s].[Libelle], [d0].[Id], [d0].[IdDossier], [d0].[NumeroDemande], [d0].[Equipement], [d0].[Modele], [d0].[Marque]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
WHERE [d].[IdClient] = @__userId_Value_0
ORDER BY [d].[Id], [s].[Id]
2025-11-17 03:44:54.696 +01:00 [INF] HTTP GET /api/demandes/recents responded 200 in 7381.2286 ms
2025-11-17 03:45:24.959 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
WHERE [d].[IdClient] = @__userId_Value_0
2025-11-17 03:45:25.215 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM (
    SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero]
    FROM [dossiers] AS [d]
    WHERE [d].[IdClient] = @__userId_Value_0
    ORDER BY [d].[DateOuverture] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [statuts] AS [s] ON [t].[IdStatut] = [s].[Id]
ORDER BY [t].[DateOuverture] DESC
2025-11-17 03:45:25.591 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 1071.4133 ms
2025-11-17 03:46:03.236 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
WHERE [d].[IdClient] = @__userId_Value_0
2025-11-17 03:46:03.306 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM (
    SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero]
    FROM [dossiers] AS [d]
    WHERE [d].[IdClient] = @__userId_Value_0
    ORDER BY [d].[DateOuverture] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [statuts] AS [s] ON [t].[IdStatut] = [s].[Id]
ORDER BY [t].[DateOuverture] DESC
2025-11-17 03:46:03.332 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 438.2356 ms
2025-11-17 03:46:43.671 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
2025-11-17 03:46:43.799 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
ORDER BY [d].[DateOuverture] DESC
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-11-17 03:46:43.826 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 293.9111 ms
2025-11-17 03:47:00.160 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
2025-11-17 03:47:00.178 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
ORDER BY [d].[DateOuverture] DESC
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-11-17 03:47:00.191 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 61.3312 ms
2025-11-17 03:47:11.773 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
WHERE [d].[IdClient] = @__userId_Value_0
2025-11-17 03:47:11.787 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM (
    SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero]
    FROM [dossiers] AS [d]
    WHERE [d].[IdClient] = @__userId_Value_0
    ORDER BY [d].[DateOuverture] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [statuts] AS [s] ON [t].[IdStatut] = [s].[Id]
ORDER BY [t].[DateOuverture] DESC
2025-11-17 03:47:11.801 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 35.1429 ms
2025-11-17 03:47:26.854 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
2025-11-17 03:47:26.875 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
ORDER BY [d].[DateOuverture] DESC
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-11-17 03:47:26.889 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 46.7874 ms
2025-11-17 03:47:35.172 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
2025-11-17 03:47:35.195 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__searchTerm_1_contains='?' (Size = 30), @__searchTerm_1_contains_1='?' (Size = 120), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
WHERE [d].[IdClient] = @__userId_Value_0 AND (LOWER([d].[Numero]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR LOWER([d].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\' OR LOWER([s].[Libelle]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\')
ORDER BY [d].[DateOuverture] DESC
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-11-17 03:47:35.213 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 68.7121 ms
2025-11-17 04:03:24.663 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 04:03:24.725 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 04:03:24.834 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 04:03:24.837 +01:00 [INF] Hosting environment: Development
2025-11-17 04:03:24.839 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 04:03:25.953 +01:00 [INF] HTTP GET /index.html responded 200 in 173.4158 ms
2025-11-17 04:03:26.065 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 304 in 49.2775 ms
2025-11-17 04:03:26.466 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 95.5519 ms
2025-11-17 04:05:31.511 +01:00 [INF] HTTP GET /api/dossiers/de26788c-50c2-4a38-8c6a-34ba554386b7 responded 401 in 4177.4954 ms
2025-11-17 04:05:56.364 +01:00 [INF] HTTP GET /index.html responded 200 in 41.0181 ms
2025-11-17 04:05:56.628 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 49.8891 ms
2025-11-17 04:06:58.638 +01:00 [INF] HTTP GET /api/dossiers/de26788c-50c2-4a38-8c6a-34ba554386b7 responded 401 in 52.5195 ms
2025-11-17 04:07:50.225 +01:00 [INF] Executed DbCommand (208ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 04:07:52.075 +01:00 [ERR] HTTP POST /api/auth/login responded 500 in 11810.4322 ms
System.UnauthorizedAccessException: Email ou mot de passe invalide.
   at FrontOffice.Application.Features.Authentication.Queries.Login.LoginClientQueryHandler.Handle(LoginClientQuery request, CancellationToken cancellationToken) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Application\Features\Authentication\Queries\Login\LoginClientQueryHandler.cs:line 64
   at FrontOffice.Api.Controllers.AuthenticationController.Login(LoginClientQuery query) in D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api\Controllers\AuthenticationController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-17 04:08:07.956 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 04:08:08.437 +01:00 [INF] HTTP POST /api/auth/login responded 200 in 569.8472 ms
2025-11-17 04:09:39.123 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-17 04:09:39.196 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid), @__userId_Value_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [t].[Id0], [t].[Code], [t].[Libelle0], [t].[Id1], [t].[Code0], [t].[DateCreation], [t].[DateModification], [t].[Libelle1], [t].[MobileBanking], [t].[Remarques], [t].[UtilisateurCreation], [t].[UtilisateurModification], [c].[Id], [c].[commentaire], [c].[DateCommentaire], [c].[IdDossier], [c].[NomInstructeur], [c].[Proposition], [d0].[Id], [d0].[Date], [d0].[IdDossier], [d0].[MontantControle], [d0].[MontantEtude], [d0].[MontantHomologation], [d0].[PaiementMobileId], [d0].[PaiementOk], [d1].[Id], [d1].[Donnees], [d1].[Extension], [d1].[FilePath], [d1].[IdDossier], [d1].[Nom], [d1].[Type], [t0].[Id], [t0].[ContactEmail], [t0].[ContactNom], [t0].[Description], [t0].[Equipement], [t0].[Fabricant], [t0].[IdCategorie], [t0].[IdDossier], [t0].[IdMotifRejet], [t0].[IdProposition], [t0].[Marque], [t0].[Modele], [t0].[NumeroDemande], [t0].[QuantiteEquipements], [t0].[Type], [t0].[Id0], [t0].[DateDelivrance], [t0].[DateExpiration], [t0].[Donnees], [t0].[Extension], [t0].[IdDemande]
FROM (
    SELECT TOP(1) [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id] AS [Id0], [s].[Code], [s].[Libelle] AS [Libelle0], [m].[Id] AS [Id1], [m].[Code] AS [Code0], [m].[DateCreation], [m].[DateModification], [m].[Libelle] AS [Libelle1], [m].[MobileBanking], [m].[Remarques], [m].[UtilisateurCreation], [m].[UtilisateurModification]
    FROM [dossiers] AS [d]
    INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
    INNER JOIN [modesReglements] AS [m] ON [d].[IdModeReglement] = [m].[Id]
    WHERE [d].[Id] = @__request_DossierId_0 AND [d].[IdClient] = @__userId_Value_1
) AS [t]
LEFT JOIN [commentaires] AS [c] ON [t].[Id] = [c].[IdDossier]
LEFT JOIN [devis] AS [d0] ON [t].[Id] = [d0].[IdDossier]
LEFT JOIN [documentsDossiers] AS [d1] ON [t].[Id] = [d1].[IdDossier]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[ContactEmail], [d2].[ContactNom], [d2].[Description], [d2].[Equipement], [d2].[Fabricant], [d2].[IdCategorie], [d2].[IdDossier], [d2].[IdMotifRejet], [d2].[IdProposition], [d2].[Marque], [d2].[Modele], [d2].[NumeroDemande], [d2].[QuantiteEquipements], [d2].[Type], [a].[Id] AS [Id0], [a].[DateDelivrance], [a].[DateExpiration], [a].[Donnees], [a].[Extension], [a].[IdDemande]
    FROM [demandes] AS [d2]
    LEFT JOIN [attestations] AS [a] ON [d2].[Id] = [a].[IdDemande]
) AS [t0] ON [t].[Id] = [t0].[IdDossier]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1], [c].[Id], [d0].[Id], [d1].[Id], [t0].[Id]
2025-11-17 04:09:39.308 +01:00 [INF] HTTP GET /api/dossiers/de26788c-50c2-4a38-8c6a-34ba554386b7 responded 200 in 704.1018 ms
2025-11-17 04:11:11.869 +01:00 [INF] HTTP GET /index.html responded 200 in 31.6078 ms
2025-11-17 04:11:12.273 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 57.1090 ms
2025-11-17 10:47:07.784 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 10:47:07.819 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 10:47:08.001 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 10:47:08.005 +01:00 [INF] Hosting environment: Development
2025-11-17 10:47:08.008 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 10:47:17.478 +01:00 [INF] HTTP GET /index.html responded 200 in 91.5353 ms
2025-11-17 10:47:17.595 +01:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 74.2061 ms
2025-11-17 10:47:17.595 +01:00 [INF] HTTP GET /swagger-ui.css responded 200 in 73.9132 ms
2025-11-17 10:47:17.614 +01:00 [INF] HTTP GET /css/swagger-custom.css responded 200 in 88.1338 ms
2025-11-17 10:47:17.625 +01:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 104.4608 ms
2025-11-17 10:47:17.867 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 39.9201 ms
2025-11-17 10:47:17.911 +01:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.6084 ms
2025-11-17 11:13:32.361 +01:00 [INF] Now listening on: https://localhost:7016
2025-11-17 11:13:32.397 +01:00 [INF] Now listening on: http://localhost:5041
2025-11-17 11:13:32.471 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 11:13:32.474 +01:00 [INF] Hosting environment: Development
2025-11-17 11:13:32.478 +01:00 [INF] Content root path: D:\CDS\work_space\arpce-microservice-frontOffice\Arpce.Homologation.FrontOffice\FrontOffice.Api
2025-11-17 11:14:10.606 +01:00 [INF] HTTP GET /index.html responded 200 in 91.7907 ms
2025-11-17 11:14:10.895 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 46.3522 ms
2025-11-17 11:17:13.506 +01:00 [INF] Executed DbCommand (154ms) [Parameters=[@__request_Email_0='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Adresse], [c].[Bp], [c].[ChangementMotPasse], [c].[Code], [c].[ContactFonction], [c].[ContactNom], [c].[ContactTelephone], [c].[DateCreation], [c].[DateModification], [c].[Desactive], [c].[Email], [c].[MotPasse], [c].[Pays], [c].[RaisonSociale], [c].[RegistreCommerce], [c].[Remarques], [c].[UtilisateurCreation], [c].[UtilisateurModification], [c].[Ville]
FROM [clients] AS [c]
WHERE [c].[Email] = @__request_Email_0
2025-11-17 11:17:14.329 +01:00 [INF] HTTP POST /api/auth/login responded 200 in 6616.1347 ms
2025-11-17 11:18:06.227 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-17 11:18:06.263 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[Description], [d0].[Equipement], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[QuantiteEquipements], [d0].[Type], [s].[Code], [s].[Libelle], [d1].[Id], [d1].[Date], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[PaiementMobileId], [d1].[PaiementOk]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[IdClient] = @__userId_Value_0
ORDER BY [d].[Id], [s].[Id], [d0].[Id]
2025-11-17 11:18:06.399 +01:00 [INF] HTTP GET /api/dossiers/apercu responded 200 in 412.4619 ms
2025-11-17 11:18:34.686 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
WHERE [d].[IdClient] = @__userId_Value_0
2025-11-17 11:18:34.723 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM (
    SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero]
    FROM [dossiers] AS [d]
    WHERE [d].[IdClient] = @__userId_Value_0
    ORDER BY [d].[DateOuverture] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [statuts] AS [s] ON [t].[IdStatut] = [s].[Id]
ORDER BY [t].[DateOuverture] DESC
2025-11-17 11:18:34.749 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 209.5128 ms
2025-11-17 11:19:01.409 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid), @__userId_Value_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[NumeroDemande], [t].[Montant], [t].[DateEcheance], [t].[ModeReglementLibelle]
FROM [dossiers] AS [d]
INNER JOIN [modesReglements] AS [m] ON [d].[IdModeReglement] = [m].[Id]
CROSS APPLY (
    SELECT [d].[Id], [d].[Numero] AS [NumeroDemande], [d0].[MontantEtude] + COALESCE([d0].[MontantHomologation], 0.0) + COALESCE([d0].[MontantControle], 0.0) AS [Montant], [d0].[Date] AS [DateEcheance], [m].[Libelle] AS [ModeReglementLibelle]
    FROM [devis] AS [d0]
    WHERE [d].[Id] = [d0].[IdDossier] AND [d0].[PaiementOk] = CAST(0 AS tinyint)
) AS [t]
WHERE [d].[Id] = @__request_DossierId_0 AND [d].[IdClient] = @__userId_Value_1
2025-11-17 11:19:01.420 +01:00 [INF] HTTP GET /api/dossiers/de26788c-50c2-4a38-8c6a-34ba554386b7/paiement-en-attente responded 404 in 64.8877 ms
2025-11-17 11:20:57.570 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_Libelle_0='?' (Size = 120)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dossiers] AS [d]
        WHERE [d].[Libelle] = @__request_Libelle_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 11:20:57.605 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Code], [s].[Libelle]
FROM [statuts] AS [s]
WHERE [s].[Code] = N'NouvelleDemande'
2025-11-17 11:20:57.623 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Code], [m].[DateCreation], [m].[DateModification], [m].[Libelle], [m].[MobileBanking], [m].[Remarques], [m].[UtilisateurCreation], [m].[UtilisateurModification]
FROM [modesReglements] AS [m]
WHERE [m].[Code] = N'Virement'
2025-11-17 11:20:57.888 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Size = 120), @p6='?' (Size = 30), @p7='?' (DbType = Guid), @p8='?' (Size = 8000) (DbType = Binary), @p9='?' (Size = 12), @p10='?' (Size = 512), @p11='?' (DbType = Guid), @p12='?' (Size = 60), @p13='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dossiers] ([Id], [DateOuverture], [IdClient], [IdModeReglement], [IdStatut], [Libelle], [Numero])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [documentsDossiers] ([Id], [Donnees], [Extension], [FilePath], [IdDossier], [Nom], [Type])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-11-17 11:20:57.959 +01:00 [INF] HTTP POST /api/dossiers responded 201 in 468.0672 ms
2025-11-17 11:21:30.068 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-17 11:21:30.102 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__request_DossierId_0='?' (DbType = Guid), @__userId_Value_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [t].[Id0], [t].[Code], [t].[Libelle0], [t].[Id1], [t].[Code0], [t].[DateCreation], [t].[DateModification], [t].[Libelle1], [t].[MobileBanking], [t].[Remarques], [t].[UtilisateurCreation], [t].[UtilisateurModification], [c].[Id], [c].[commentaire], [c].[DateCommentaire], [c].[IdDossier], [c].[NomInstructeur], [c].[Proposition], [d0].[Id], [d0].[Date], [d0].[IdDossier], [d0].[MontantControle], [d0].[MontantEtude], [d0].[MontantHomologation], [d0].[PaiementMobileId], [d0].[PaiementOk], [d1].[Id], [d1].[Donnees], [d1].[Extension], [d1].[FilePath], [d1].[IdDossier], [d1].[Nom], [d1].[Type], [t0].[Id], [t0].[ContactEmail], [t0].[ContactNom], [t0].[Description], [t0].[Equipement], [t0].[Fabricant], [t0].[IdCategorie], [t0].[IdDossier], [t0].[IdMotifRejet], [t0].[IdProposition], [t0].[Marque], [t0].[Modele], [t0].[NumeroDemande], [t0].[QuantiteEquipements], [t0].[Type], [t0].[Id0], [t0].[DateDelivrance], [t0].[DateExpiration], [t0].[Donnees], [t0].[Extension], [t0].[IdDemande]
FROM (
    SELECT TOP(1) [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id] AS [Id0], [s].[Code], [s].[Libelle] AS [Libelle0], [m].[Id] AS [Id1], [m].[Code] AS [Code0], [m].[DateCreation], [m].[DateModification], [m].[Libelle] AS [Libelle1], [m].[MobileBanking], [m].[Remarques], [m].[UtilisateurCreation], [m].[UtilisateurModification]
    FROM [dossiers] AS [d]
    INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
    INNER JOIN [modesReglements] AS [m] ON [d].[IdModeReglement] = [m].[Id]
    WHERE [d].[Id] = @__request_DossierId_0 AND [d].[IdClient] = @__userId_Value_1
) AS [t]
LEFT JOIN [commentaires] AS [c] ON [t].[Id] = [c].[IdDossier]
LEFT JOIN [devis] AS [d0] ON [t].[Id] = [d0].[IdDossier]
LEFT JOIN [documentsDossiers] AS [d1] ON [t].[Id] = [d1].[IdDossier]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[ContactEmail], [d2].[ContactNom], [d2].[Description], [d2].[Equipement], [d2].[Fabricant], [d2].[IdCategorie], [d2].[IdDossier], [d2].[IdMotifRejet], [d2].[IdProposition], [d2].[Marque], [d2].[Modele], [d2].[NumeroDemande], [d2].[QuantiteEquipements], [d2].[Type], [a].[Id] AS [Id0], [a].[DateDelivrance], [a].[DateExpiration], [a].[Donnees], [a].[Extension], [a].[IdDemande]
    FROM [demandes] AS [d2]
    LEFT JOIN [attestations] AS [a] ON [d2].[Id] = [a].[IdDemande]
) AS [t0] ON [t].[Id] = [t0].[IdDossier]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1], [c].[Id], [d0].[Id], [d1].[Id], [t0].[Id]
2025-11-17 11:21:30.141 +01:00 [INF] HTTP GET /api/dossiers/62130697-c6da-42d8-ab69-4afd771acb37 responded 200 in 137.9514 ms
2025-11-17 11:22:02.315 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dossiers] AS [d]
WHERE [d].[IdClient] = @__userId_Value_0
2025-11-17 11:22:02.321 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOuverture], [t].[IdClient], [t].[IdModeReglement], [t].[IdStatut], [t].[Libelle], [t].[Numero], [s].[Id], [s].[Code], [s].[Libelle]
FROM (
    SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero]
    FROM [dossiers] AS [d]
    WHERE [d].[IdClient] = @__userId_Value_0
    ORDER BY [d].[DateOuverture] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [statuts] AS [s] ON [t].[IdStatut] = [s].[Id]
ORDER BY [t].[DateOuverture] DESC
2025-11-17 11:22:02.325 +01:00 [INF] HTTP GET /api/dossiers responded 200 in 38.4698 ms
2025-11-17 11:22:33.932 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[DateOuverture], [d].[IdClient], [d].[IdModeReglement], [d].[IdStatut], [d].[Libelle], [d].[Numero], [s].[Id], [d0].[Id], [d0].[ContactEmail], [d0].[ContactNom], [d0].[Description], [d0].[Equipement], [d0].[Fabricant], [d0].[IdCategorie], [d0].[IdDossier], [d0].[IdMotifRejet], [d0].[IdProposition], [d0].[Marque], [d0].[Modele], [d0].[NumeroDemande], [d0].[QuantiteEquipements], [d0].[Type], [s].[Code], [s].[Libelle], [d1].[Id], [d1].[Date], [d1].[IdDossier], [d1].[MontantControle], [d1].[MontantEtude], [d1].[MontantHomologation], [d1].[PaiementMobileId], [d1].[PaiementOk]
FROM [dossiers] AS [d]
INNER JOIN [statuts] AS [s] ON [d].[IdStatut] = [s].[Id]
LEFT JOIN [demandes] AS [d0] ON [d].[Id] = [d0].[IdDossier]
LEFT JOIN [devis] AS [d1] ON [d].[Id] = [d1].[IdDossier]
WHERE [d].[IdClient] = @__userId_Value_0
ORDER BY [d].[Id], [s].[Id], [d0].[Id]
2025-11-17 11:22:33.938 +01:00 [INF] HTTP GET /api/dossiers/apercu responded 200 in 13.6627 ms
